<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>INTUIT.ru::Интернет-Университет Информационных Технологий</title>
<link rel="shortcut icon" href="http://www.intuit.ru/favicon.ico">


<META http-equiv="Pragma" CONTENT="no-cache">
<META http-equiv="Cache-Control" CONTENT="no-cache, must-revalidate">
<META NAME="Pragma" CONTENT="no-cache">
<META NAME="Cache-Control" CONTENT="no-cache">
<link href="../../../ssi/style.css" type="text/css" rel="stylesheet">
</head>
<body leftmargin="0" topmargin="6" marginheight="6" marginwidth="0" bgcolor="white">

<!-- header -->
<!---->
<table border="0" cellpadding="8" cellspacing="0" width="100%">
<tr valign="top">
<td><a href="http://www.intuit.ru/"><img src="../../../img/logo.gif" border="0" width="285" height="52" alt="Интернет Университет информационных технологий"></a></td>
<!---->
</tr>
</table>

<!-- /header -->

<!-- /menu -->
<table border="0" cellpadding="" cellspacing="6" width="100%">
<tr>
<td align="center" class="menu">
	<table border="0" cellpadding="0" cellspacing="0" background="" height="31">
	<tr>
	<td><a href="http://www.intuit.ru/speciality/" class="menu">Учебные программы</a></td>
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_departments.html" class="menu">Кафедры</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_courses.html" class="menu">Все курсы</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/syllabus.html" class="menu">Расписание</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/shop/" class="menu">Учебники</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/news.html" class="menu">Новости</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/department/forum/" class="menu">Форум</a></td>
<!--
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/help/" class="menu">Помощь</a></td>		
-->
	</tr>
	</table>	

</td>
</tr>
</table>
<!-- /menu -->


<table border="0" cellpadding="0" cellspacing="0" width="100%" height="73">
<tr valign="top">
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- leftcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">

		<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Лекции</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>

		<td colspan=3>
<a href="../index.html" class="spec">Программирование на Java</a>


</td>
		</tr>
<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">1.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../1/1.html" class="llecture">Что такое Java? История создания</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">2.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../2/1.html" class="llecture">Основы объектно-ориентированного...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">3.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../3/1.html" class="llecture">Лексика языка</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">4.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../4/1.html" class="llecture">Типы данных</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">5.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../5/1.html" class="llecture">Имена. Пакеты</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">6.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../6/1.html" class="llecture">Объявление классов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">7.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../7/1.html" class="llecture">Преобразование типов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">8.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../8/1.html" class="llecture">Объектная модель в Java</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">9.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../9/1.html" class="llecture">Массивы</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">10.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../10/1.html" class="llecture">Операторы и структура кода. Искл...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">11.</td>
		<td>&nbsp;</td>
<td class="llecture">


<a href="../11/1.html" class="llecture_selected">Пакет java.awt</a>


</td>
		</tr>




		<tr valign=top>

		<td class="llecture">12.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../12/1.html" class="llecture">Потоки выполнения. Синхронизация</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">13.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../13/1.html" class="llecture">Пакет java.lang</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">14.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../14/1.html" class="llecture">Пакет java.util</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">15.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../15/1.html" class="llecture">Пакет java.io</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">16.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../16/1.html" class="llecture">Введение в сетевые протоколы</a>
</td>
		</tr>






<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="http://www.intuit.ru/department/pl/javapl/class/examination/" class="llecture">Экзамен</a></td>
		</tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a class="llecture_red" href="http://www.intuit.ru/department/pl/javapl/class/examination_extern/">Сдать экзамен экстерном</a></td>
		</tr>

<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../lit.html" class="llecture">Литература</a></td>
		</tr>





		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../keywords.html" class="llecture">Предметный указатель</a></td>
		</tr>



		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../examples.html" class="llecture">Примеры</a></td>
		</tr>


		</table><br>
	</td>
	</tr>


	

	<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Общение</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/classmates/" class="spec">однокурсники</a></td>
		</tr>
		

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/forum/" class="spec">форум по курсу</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/question_for_lector/" class="spec">вопрос преподавателю</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/opinions/" class="spec">мнения о курсе</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/rating/" class="spec">рейтинг выпускников</a></td>
		</tr>


		</table><br>
	</td>
	</tr>



<tr><td height="1"><a href="../robot.html"><img src="../../../img/empty.gif" width="1" height="1" border="0"></a></td></tr>

	</table>

	<!-- #include virtual="~/inc/leftcolumn.html" -->
	<!-- /leftcolumn -->	
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td>
	<!-- content -->
	<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr><td class="head" colspan=2>Программирование на Java</td></tr>
<tr><td colspan=2 height="4"><img src="../../../img/empty.gif" width="1" height="4"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>




<tr>
<td colspan="2" align=left class="headsub">Лекция #11: <a href="../11/1.html">Пакет java.awt</a></td>
</tr>

<tr><td height="6" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>


<tr>

<td align=left><font class="rtitle">Страницы:</font>
<a class="rtitle" href="3.html">&laquo;</a> <font class="stitle">|</font>


<a class="rtitle" href="1.html">1</a>
<font class="stitle">|</font>


<a class="rtitle" href="2.html">2</a>
<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>

<font class="rtitle">4</font>

<font class="stitle">|</font>


<a class="rtitle" href="5.html">5</a>
<font class="stitle">|</font>


<a class="rtitle" href="6.html">6</a>
<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/11/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="5.html"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/11/javapl_11.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>


	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/11/4.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2>


    
    <h3 >Обработка пользовательских событий</h3>
        
        <p >Весь предыдущий раздел "Дерево компонентов" был посвящен заданию внешнего вида пользовательского интерфейса. Однако до сих пор он был статическим. Перейдем теперь к рассмотрению правил обработки различных событий, которые могут возникать как результат действий пользователя, и не только.</p>
        <p >Модель обработки событий построена на основе стандартного шаблона проектирования ООП <span class="texample">Observer/Observable</span>. В качестве наблюдаемого объекта выступает тот или иной компонент AWT. Для него можно задать один или несколько классов-наблюдателей. В AWT они называются слушателями (listener) и описываются специальными интерфейсами, название которых оканчивается на слово <span class="texample">Listener</span>. Когда с наблюдаемым объектом что-то происходит, создается объект "событие" (event), который "посылается" всем слушателям. Так слушатель узнает, например, о действии пользователя и может на него отреагировать.</p>
        <p >Каждое событие является подклассом класса <span class="texample">java.util.EventObject</span>. События пакета AWT, которые и рассматриваются в данной лекции, являются подклассами <span class="texample">java.awt.AWTEvent</span>. Для удобства классы различных событий и интерфейсы слушателей помещены в отдельный пакет <span class="texample">java.awt.event</span>.</p>
        <p >Прежде, чем углубляться в особенности событий, рассмотрим, как они применяются на практике, на примере простейшего события – <span class="texample">ActionEvent</span>.</p>
        <h4 >Событие ActionEvent</h4>
            
            <p >Рассмотрим появление события <span class="texample">ActionEvent</span> на примере нажатия на кнопку.</p>
            <p >Предположим, в нашем приложении создается кнопка сохранения файла:</p>
            <div  class="example"><pre>
Button save = new Button("Save");
add(save);</pre></div>
            <p >Теперь, когда окно приложения с этой кнопкой появится на экране, пользователь сможет нажать ее. В результате AWT сгенерирует <span class="texample">ActionEvent</span>. Чтобы получить и обработать его, необходимо зарегистрировать слушателя. Название нужного интерфейса прямо следует из названия события – <span class="texample">ActionListener</span>. В нем всего один метод (в некоторых слушателях их несколько), который имеет один аргумент – <span class="texample">ActionEvent</span>.</p>
            <p >Объявим класс, который реализует этот интерфейс:</p>
            <div  class="example"><pre>
class SaveButtonListener 
    implements ActionListener {
  private Frame parent;
  public SaveButtonListener(Frame parentFrame)
  {
    parent = parentFrame;
  }
  public void actionPerformed(ActionEvent e)
  {
    FileDialog fd = new FileDialog(parent, 
               "Save file", FileDialog.SAVE);
    fd.setVisible(true);
    System.out.println(fd.getDirectory()+"/"+
                       fd.getFile());
  }
} </pre></div>
            <p >Конструктор класса требует в качестве параметра ссылку на родительский фрейм, без которого не удастся создать <span class="texample">FileDialog</span>. В методе <span class="texample">actionPerformed</span> класса <span class="texample">ActionListener</span> описываются действия, которые необходимо предпринять по нажатию пользователем на кнопку. А именно, открывается файловый диалог, с помощью которого определяется путь сохранения файла. Для нашего примера достаточно вывести этот путь на консоль.</p>
            <p >Следующий шаг – регистрация слушателя. Название соответствующего метода снова прямо следует из названия интерфейса – <span class="texample">addActionListener</span>.</p>
            <div  class="example"><pre>
save.addActionListener(
     new SaveButtonListener(frame));
</pre></div>
            <p >Все необходимое для обработки нажатия пользователем на кнопку сделано. Ниже приведен полный листинг программы:</p>
            <div  class="example"></div>  
            <p >После запуска программы появится фрейм с одной кнопкой <span class="texample">"Save"</span>. Если нажать на нее, откроется файловый диалог. После выбора файла на консоли отображается полный путь к нему.</p>
        
        <h4 >События AWT</h4>
            
            <p >Итак, для каждого события AWT определен класс <span class="texample">XXEvent</span>, интерфейс <span class="texample">XXListener</span>, а в компоненте-источнике событий – метод для регистрации слушателя <span class="texample">addXXListener</span>.</p>
            <p >Совсем не обязательно, чтобы одно событие могло порождаться лишь одним компонентом как результат какого-то одного действия пользователя. Например, рассмотренный <span class="texample">ActionEvent</span> генерируется после нажатия на кнопку (<span class="texample">Button</span>), после нажатия клавиши <span class="texample">Enter</span> в поле ввода текста (<span class="texample">TextField</span>), при двойном щелчке мыши по элементу списка (<span class="texample">List</span>) и т.д. Узнать, какие события генерирует тот или иной компонент, можно по наличию методов <span class="texample">addXXListener</span>.</p>
            <p >Многие слушатели, в отличие от <span class="texample">ActionListener</span>, имеют более одного метода для различных видов событий. Например, <span class="texample">MouseMotionListener</span> наблюдает за движением мыши и имеет два метода – <span class="texample">mouseMoved</span> (обычное движение) и <span class="texample">mouseDragged</span> (перемещение с нажатой кнопкой мыши). Иногда бывает необходимо работать лишь с одним методом, остальные приходится объявлять и оставлять пустыми. Чтобы избежать этой бесполезной работы, в пакете <span class="texample">java.awt.event</span> объявлены вспомогательные классы-адаптеры, например, <span class="texample">MouseMotionAdapter</span> (название прямо следует из названия слушателя). Эти классы наследуются от <span class="texample">Object</span> и реализуют соответствующий интерфейс. Адаптер – абстрактный класс, но абстрактных методов в нем нет, они все объявлены пустыми. От такого класса можно наследоваться и переопределить только те методы, которые нужны для приложения.</p>
            <p >Классы сообщений (<span class="texample">event</span>) содержат вспомогательную информацию для обработки события. Метод <span class="texample">getSource()</span> возвращает объект-источник события. Конкретные наследники <span class="texample">AWTEvent</span> могут иметь дополнительные методы. Например, <span class="texample">MouseEvent</span> сообщает о нажатии кнопки мыши, а его методы <span class="texample">getX</span> и <span class="texample">getY</span> возвращают координаты точки, где это событие произошло.</p>
            <p >Наряду с методом <span class="texample">addXXListener</span> важную роль играет <span class="texample">removeXXListener</span>. Поскольку в Java ненужные объекты удаляются из памяти автоматическим сборщиком мусора, который подсчитывает ссылки на объекты, важно следить за тем, чтобы не оставалось ссылок на ненужные объекты. Если слушатель уже выполнил свою роль и более не нужен, то явно в программе может не остаться ссылок на него, однако компонент будет хранить его в своем списке слушателей. Чтобы дать сработать garbage collector, необходимо воспользоваться методом <span class="texample">removeXXListener</span>.</p>
            <p >Рассмотрим обзорно все события AWT и соответствующих им слушателей, определенных в Java начиная с версии 1.1.</p>
            <h5 >MouseMotionListener и MouseEvent</h5>
                
                <p >Это событие рассматривалось выше в примере. Оно отвечает за перемещение курсора мыши. Соответствующий слушатель имеет два метода – <span class="texample">mouseMoved</span> для обычного перемещения и <span class="texample">mouseDragged</span> для перемещения с нажатой кнопкой мыши. Обратите внимание, что этот слушатель работает не с событием <span class="texample">MouseMotionEvent</span> (такого класса нет), а с <span class="texample">MouseEvent</span>, как и <span class="texample">MouseListener</span>.</p>
            
            <h5 >MouseListener и MouseEvent</h5>
                
                <p >Этот слушатель имеет методы <span class="texample">mouseEntered</span> и <span class="texample">mouseExited</span>. Первый вызывается, когда курсор мыши появляется над компонентом, а второй – когда выходит из его границ.</p>
                <p >Для обработки нажатий кнопки мыши служат три метода: <span class="texample">mousePressed</span>, <span class="texample">mouseReleased</span> и <span class="texample">mouseClicked</span>. Если пользователь нажал, а затем отпустил кнопку, то слушатель получит все три события в указанном порядке. Если щелчков было несколько, то метод <span class="texample">getClickCount</span> класса <span class="texample">MouseEvent</span> вернет количество. Как уже указывалось, методы <span class="texample">getX</span> и <span class="texample">getY</span> возвращают координаты точки, где произошло событие. Чтобы определить, какая кнопка мыши была нажата, нужно воспользоваться методом <span class="texample">getModifiers</span> и сравнить результат с константами:</p>
                <div  class="example"><pre>
(event.getModifiers() &amp; 
   MouseEvent.BUTTON1_MASK)!=0
</pre></div>
                <p >Как правило, первая кнопка соответствует левой кнопке мыши.</p>
            
            <h5 >KeyListener и KeyEvent</h5>
                
                <p >Этот слушатель отслеживает нажатие клавиш клавиатуры и имеет три метода: <span class="texample">keyTyped</span>, <span class="texample">keyPressed</span>, <span class="texample">keyReleased</span>. Первый отвечает за ввод очередного <span class="texample">Unicode</span>-символа с клавиатуры. Метод <span class="texample">keyPressed</span> сигнализирует о нажатии, а <span class="texample">keyReleased</span> – об отпускании некоторой клавиши. Взаимосвязь между этими событиями может быть нетривиальной. Например, если пользователь нажмет и будет удерживать клавишу <span class="texample">Shift</span> и в это время нажмет клавишу <span class="texample">"A"</span>, произойдет одно событие типа <span class="texample">keyTyped</span> и несколько <span class="texample">keyPressed/Released</span>. Если пользователь нажмет и будет удерживать, например, пробел, то после первого <span class="texample">keyPressed</span> будет многократно вызван метод <span class="texample">keyTyped</span>, а после отпускания – <span class="texample">keyReleased</span>.</p>
                <p >В классе <span class="texample">KeyEvent</span> определено множество констант, которые позволяют точно идентифицировать, какая клавиша была нажата и в каком состоянии находились служебные клавиши (<span class="texample">Ctrl</span>, <span class="texample">Alt</span>, <span class="texample">Shift</span> и так далее).</p>
            
            <h5 >FocusListener и FocusEvent</h5>
                
                <p >В каждом приложении один из компонентов обладает фокусом и может получать события от клавиатуры. Фокус можно переместить, например, щелкнув мышкой по другому компоненту, либо нажав клавишу <span class="texample">Tab</span>.</p>
                <p >Интерфейс <span class="texample">FocusListener</span> содержит два метода – <span class="texample">focusGained</span> и <span class="texample">focusLost</span> (получен/потерян).</p>
            
            <h5 >TextListener и TextEvent</h5>
                
                <p >Компоненты-наследники <span class="texample">TextComponent</span> отвечают за ввод текста и порождают <span class="texample">TextEvent</span>. Слушатель имеет один метод <span class="texample">textValueChanged</span>. С его помощью можно отслеживать каждое изменение текста, чтобы, например, выдавать пользователю подсказку, основываясь на первых введенных символах.</p>
            
            <h5 >ItemListener и ItemEvent</h5>
                
                <p >Это событие могут генерировать такие классы, как <span class="texample">Checkbox</span>, <span class="texample">Choice</span>, <span class="texample">List</span>. Слушатель имеет один метод <span class="texample">itemStateChanged</span>, который сигнализирует об изменении состояния элементов.</p>
            
            <h5 >AdjustmentListener и AdjustmentEvent</h5>
                
                <p >Это событие генерируется компонентом <span class="texample">ScrollBar</span>. Слушатель имеет один метод <span class="texample">adjustmentValueChanged</span>, сигнализирующий об изменении состояния полосы прокрутки.</p>
            
            <h5 >WindowListener и WindowEvent</h5>
                
                <p >Это событие сигнализирует об изменении состояния окна (класс <span class="texample">Window</span> и его наследники).</p>
                <p >Рассмотрим особо один из методов слушателя – <span class="texample">windowClosing</span>. Этот метод вызывается, когда пользователь предпринимает попытку закрыть окно, например, нажимая на соответствующую кнопку в заголовке окна. Мы видели из примеров ранее, что в Java окна при этом не закрываются. Дело в том, что AWT лишь посылает <span class="texample">WindowEvent</span> в ответ на такое действие, а инициировать закрытие окна должен программист:</p>
                <div  class="example"><pre>
public class WindowClosingAdapter 
      extends WindowAdapter {
   public void windowClosing(WindowEvent e) 
   {
      ((Window)e.getSource()).dispose();
   }
}</pre></div>
                <p >Объявленный адаптер в методе <span class="texample">windowClosing</span> получает ссылку на окно, от которого пришло событие. Обычно мы пользовались методом <span class="texample">setVisible(false)</span>, чтобы сделать компонент невидимым. Но поскольку <span class="texample">Window</span> автоматически порождает окно операционной системы, существует специальный метод <span class="texample">dispose</span>, который освобождает все системные ресурсы, связанные с этим окном.</p>
                <p >Когда окно будет закрыто, у слушателя вызывается еще один метод – <span class="texample">windowClosed</span>.</p>
            
            <h5 >ComponentListener и ComponentEvent</h5>
                
                <p >Это событие отражает изменение основных параметров компонента – положение, размер, свойство <span class="texample">visible</span>.</p>
            
            <h5 >ContainerListener и ContainerEvent</h5>
                
                <p >Это событие позволяет отслеживать изменение списка содержащихся в этом контейнере компонент.</p>
                <p >С развитием Java в AWT появляются и другие события, например, позволяющие поддерживать колесико мыши. Однако все они работают по точно такой же схеме, а потому их можно легко освоить самостоятельно.</p>
            
        
        <h4 >Обработка событий с помощью внутренних классов</h4>
            
            <p >Еще в лекции, посвященной объявлению классов, было указано, что в теле класса можно объявлять внутренние классы. До сих пор такая возможность не была востребована в наших примерах, однако обработка событий AWT – как раз удобный случай рассмотреть такие классы на примере анонимных классов.</p>
            <p >Предположим, в приложение добавляется кнопка, которой следует добавить слушателя. Зачастую бывает удобно описать логику действий в отдельном методе того же класса. Если вводить слушателя, как делалось раньше – в отдельном классе, то это сразу порождает ряд неудобств: появляется новый, малосодержательный класс, которому к тому же необходимо передать ссылку на исходный класс и так далее.</p>
            <p >Гораздо удобнее поступить следующим образом:</p>
            <div  class="example"><pre>
Button b = new Button();
b.addActionListener(new ActionListener() 
{
   public void actionPerformed(ActionEvent e)
   {
      processButton();
   }
}; 
</pre></div>
            <p >Рассмотрим подробно, что происходит в этом примере. Сначала создается кнопка, у которой затем вызывается метод <span class="texample">addActionListener</span>. Обратим внимание на аргумент этого метода. Может сложится впечатление, что производится попытка создать экземпляр интерфейса (<span class="texample">new ActionListener()</span>), однако это невозможно. Дело меняет фигурная скобка, которая указывает, что порождается экземпляр нового класса, объявление которого последует за этой скобкой. Класс наследуется от <span class="texample">Object</span> и реализует интерфейс <span class="texample">ActionListener</span>. Ему необходимо реализовать метод <span class="texample">actionPeroformed</span>, что и делается. Обратите внимание на еще одну важную деталь – в этом методе вызывается <span class="texample">processButton</span>. Это метод, который мы планировали разместить во внешнем классе. Таким образом, внутренний класс может напрямую обращаться к методам внешнего класса.</p>
            <p >Такой класс называется анонимным, он не имеет своего имени. Однако правило, согласно которому компилятор всегда создает <span class="texample">.class</span>-файл для каждого класса Java, действует и здесь. Если внешний класс называется <span class="texample">Test</span>, то после компиляции появится файл <span class="texample">Test$1.class</span>.</p>
        
        <h4 >Пример приложения, использующего модель событий</h4>
            
            <p >В заключение темы, посвященной событиям, рассмотрим пример приложения, которое активно их использует.</p>
            <p >Попробуем написать примитивный графический редактор, который позволяет рисовать с помощью курсора – если перемещать его с нажатой кнопкой мыши, то будет появляться линия. Нажатие пробела очищает поле.</p>
            <div  class="example"></div>  
            <p >Класс <span class="texample">DrawCanvas</span> и является тем полем, на котором можно рисовать. В его конструкторе инициализируются все необходимые слушатели. В случае прихода события инициализируется перерисовка (метод <span class="texample">repaint</span>), логика которой описана в <span class="texample">update</span>. Запускаемый метод <span class="texample">main</span> инициализирует <span class="texample">frame</span>, не забывая про <span class="texample">windowClosing</span>.</p>
            <p >В результате можно что-нибудь нарисовать:</p>
            <p  align="center"><a name=""></a><img src="11pic16.gif" alt=""><br><b>Рис. 
            </b> </p>
        


    
	</td>		
	</tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2 align="center">

<a href="5.html" class="attention">Перейти к следующей странице &raquo;</b></a>

	</td></tr>
	<tr><td height="16" colspan=2><img src="../../../img/empty.gif" width="1" height="16"></td></tr>

<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/11/4.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr>

<td align=left><font class="rtitle">Страницы:</font>
<a class="rtitle" href="3.html">&laquo;</a> <font class="stitle">|</font>


<a class="rtitle" href="1.html">1</a>
<font class="stitle">|</font>


<a class="rtitle" href="2.html">2</a>
<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>

<font class="rtitle">4</font>

<font class="stitle">|</font>


<a class="rtitle" href="5.html">5</a>
<font class="stitle">|</font>


<a class="rtitle" href="6.html">6</a>
<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/11/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="5.html"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/11/javapl_11.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	</table>
	<!-- /content -->

</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- rightcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">
	<!---->


<!--Основные понятия-->
	<td class="bordo" height="24">&nbsp;&nbsp;Ключевые слова</td>
	</tr>
	<tr>
	<td><span class="rtxt"><span  class="keyword_list">background</span>, <span  class="keyword_list">foreground</span><br ><br ><a  class="allnews" href="../keywords.html">все ключевые слова »</a>
</td>
	</tr>
	<tr><td>&nbsp;</td></tr>
<!--/Основные понятия-->

		<tr><td class="bordo" height="24">&nbsp;&nbsp;Информация о лекции</td></tr>
	<tr>
	<td>
<span class="rtxt">Эта лекция начинает рассмотрение базовых библиотек Java, которые являются неотъемлимой частью языка и входят в его спецификацию, а именно описывается пакет java.awt, предоставляющий технологию AWT для создания графического (оконного) интерфейса пользователя – GUI. Ни одна современная программа, предназначенная для пользователя, не обходится без удобного, понятного, в идеале – красивого пользовательского интерфейса. С самой первой версии в Java существует специальная технология для создания GUI. Она называется AWT, Abstract Window Toolkit. Именно о ней пойдет речь в этой лекции. Пакет java.awt претерпел, пожалуй, больше всего изменений с развитием версий Java. Мы рассмотрим дерево компонентов, доступных программисту, специальную модель сообщений, позволяющую гибко обрабатывать пользовательские действия, и другие особенности AWT – работа с цветами, шрифтами, отрисовка графических примитивов, менеджеры компоновки и т.д. Хотя технология AWT включает в себя гораздо больше, чем можно изложить в рамках одной лекции, здесь собраны все необходимые сведения для создания полноценного оконного интерфейса.

	</td>
	</tr>
	<tr><td>&nbsp;</td></tr>

	

	
	<td class="bordo" height="24">&nbsp;&nbsp;Учебники к курсу</td>
	</tr>
	<tr>
<td>

		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td>

<table border="0" cellpadding="1" cellspacing="0"  align="left" hspace="5" vspace="2"><tr><td class="orang"><table border="0" cellpadding="2" cellspacing="0" bgcolor="#ffffff"><tr><td valign="middle" align="center"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325"><img width="72" height="105" src="../../../img/covers/i/in/int/intu006.jpg" alt="Программирование на Java" border="0"></a></td></tr></table></td></tr></table>

<a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325" class="spectitle">
Программирование на Java</a>
<br>
<font class="spectxt">
Вязовик Н.А.,
<br>
Интернет-университет информационных технологий - ИНТУИТ.ру.
<br>
Курс лекций посвящен современному и мощному языку программирования Java. В его рамках дается вводное изложение принципов ООП, необходимое для разработки на Java, основы языка, библиотеки для работы с файлами, сетью, для построения оконного интерфейса пользователя (GUI) и др.

</font>
		</td>
		</tr>

		</table>

</td>
	</tr>


	<tr><td height="10"><img src="../../../img/empty.gif" width="1" height="10"></td></tr>



	<tr>
<td>
		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td class="spectxt">
<span class="spectitle"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=1412049" class="spectitle">Приемы объектно-ориентированного проектирования. Паттерны проектирования</a></span>
<br>
Гамма Э. и др.,
Питер.
		</td>
		</tr>


		</table>

</td>
	</tr>


<tr>
<td><a href="http://www.intuit.ru/cgi-bin/goto.fcgi?mode=books_of_course&cid=57" class="allnews">все книги по курсу &raquo;</a></td>
</tr>



	</table>
	<!-- /rightcolumn -->
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
</tr>
</table>

<!-- /bottom -->
<table border="0" cellpadding="0" cellspacing="6" width="100%" height="73">
<tr>
<td align="center" class="menu">
    <table border="0" cellpadding="0" cellspacing="0" background="">
    <tr>
    <td class="copy">
    <a href="http://www.intuit.ru/all_departments.html" class="bot">Кафедры</a> |
    <a href="http://www.intuit.ru/all_courses.html" class="bot">Все курсы</a> |
    <a href="http://www.intuit.ru/syllabus.html" class="bot">Расписание</a> |
    <a href="http://www.intuit.ru/shop/catalog/index.html?" class="bot">Учебники</a> | 
    <a href="http://www.intuit.ru/news.html" class="bot">Новости</a> | 
    <a href="http://www.intuit.ru/department/forum/" class="bot">Форум</a>
    <br>
    <a href="http://www.intuit.ru/user/classes/" class="bot">Мои курсы</a> | 
    <a href="http://www.intuit.ru/user/adjustments/" class="bot">Личные настройки</a> | 
    <a href="http://www.intuit.ru/user/cart/" class="bot">Корзина</a> | 
    <a href="http://www.intuit.ru/help/" class="bot">Помощь</a><br><br>
    Телефон: (095) 253-9312, 253-9313, факс: (095) 253-9310, email: <a href="http://www.intuit.ru/help/askform.xhtml" class="bot">info@intuit.ru</a><br>
    Адрес: 123056 Москва, Электрический пер., 8, стр. 3<br>
    &copy; 2003-2004 INTUIT.ru. Все права защищены.
    </td>
    </tr>
    </table>
</td>
</tr>
</table>
<!-- /bottom -->


</body>
</html>
