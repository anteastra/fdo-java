<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>INTUIT.ru::Интернет-Университет Информационных Технологий</title>
<link rel="shortcut icon" href="http://www.intuit.ru/favicon.ico">


<META http-equiv="Pragma" CONTENT="no-cache">
<META http-equiv="Cache-Control" CONTENT="no-cache, must-revalidate">
<META NAME="Pragma" CONTENT="no-cache">
<META NAME="Cache-Control" CONTENT="no-cache">
<link href="../../../ssi/style.css" type="text/css" rel="stylesheet">
</head>
<body leftmargin="0" topmargin="6" marginheight="6" marginwidth="0" bgcolor="white">

<!-- header -->
<!---->
<table border="0" cellpadding="8" cellspacing="0" width="100%">
<tr valign="top">
<td><a href="http://www.intuit.ru/"><img src="../../../img/logo.gif" border="0" width="285" height="52" alt="Интернет Университет информационных технологий"></a></td>
<!---->
</tr>
</table>

<!-- /header -->

<!-- /menu -->
<table border="0" cellpadding="" cellspacing="6" width="100%">
<tr>
<td align="center" class="menu">
	<table border="0" cellpadding="0" cellspacing="0" background="" height="31">
	<tr>
	<td><a href="http://www.intuit.ru/speciality/" class="menu">Учебные программы</a></td>
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_departments.html" class="menu">Кафедры</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_courses.html" class="menu">Все курсы</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/syllabus.html" class="menu">Расписание</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/shop/" class="menu">Учебники</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/news.html" class="menu">Новости</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/department/forum/" class="menu">Форум</a></td>
<!--
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/help/" class="menu">Помощь</a></td>		
-->
	</tr>
	</table>	

</td>
</tr>
</table>
<!-- /menu -->


<table border="0" cellpadding="0" cellspacing="0" width="100%" height="73">
<tr valign="top">
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- leftcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">

		<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Лекции</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>

		<td colspan=3>
<a href="../index.html" class="spec">Программирование на Java</a>


</td>
		</tr>
<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">1.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../1/1.html" class="llecture">Что такое Java? История создания</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">2.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../2/1.html" class="llecture">Основы объектно-ориентированного...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">3.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../3/1.html" class="llecture">Лексика языка</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">4.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../4/1.html" class="llecture">Типы данных</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">5.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../5/1.html" class="llecture">Имена. Пакеты</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">6.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../6/1.html" class="llecture">Объявление классов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">7.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../7/1.html" class="llecture">Преобразование типов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">8.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../8/1.html" class="llecture">Объектная модель в Java</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">9.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../9/1.html" class="llecture">Массивы</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">10.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../10/1.html" class="llecture">Операторы и структура кода. Искл...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">11.</td>
		<td>&nbsp;</td>
<td class="llecture">


<a href="../11/1.html" class="llecture_selected">Пакет java.awt</a>


</td>
		</tr>




		<tr valign=top>

		<td class="llecture">12.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../12/1.html" class="llecture">Потоки выполнения. Синхронизация</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">13.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../13/1.html" class="llecture">Пакет java.lang</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">14.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../14/1.html" class="llecture">Пакет java.util</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">15.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../15/1.html" class="llecture">Пакет java.io</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">16.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../16/1.html" class="llecture">Введение в сетевые протоколы</a>
</td>
		</tr>






<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="http://www.intuit.ru/department/pl/javapl/class/examination/" class="llecture">Экзамен</a></td>
		</tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a class="llecture_red" href="http://www.intuit.ru/department/pl/javapl/class/examination_extern/">Сдать экзамен экстерном</a></td>
		</tr>

<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../lit.html" class="llecture">Литература</a></td>
		</tr>





		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../keywords.html" class="llecture">Предметный указатель</a></td>
		</tr>



		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../examples.html" class="llecture">Примеры</a></td>
		</tr>


		</table><br>
	</td>
	</tr>


	

	<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Общение</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/classmates/" class="spec">однокурсники</a></td>
		</tr>
		

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/forum/" class="spec">форум по курсу</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/question_for_lector/" class="spec">вопрос преподавателю</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/opinions/" class="spec">мнения о курсе</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/rating/" class="spec">рейтинг выпускников</a></td>
		</tr>


		</table><br>
	</td>
	</tr>



<tr><td height="1"><a href="../robot.html"><img src="../../../img/empty.gif" width="1" height="1" border="0"></a></td></tr>

	</table>

	<!-- #include virtual="~/inc/leftcolumn.html" -->
	<!-- /leftcolumn -->	
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td>
	<!-- content -->
	<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr><td class="head" colspan=2>Программирование на Java</td></tr>
<tr><td colspan=2 height="4"><img src="../../../img/empty.gif" width="1" height="4"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>




<tr>
<td colspan="2" align=left class="headsub">Лекция #11: <a href="../11/1.html">Пакет java.awt</a></td>
</tr>

<tr><td height="6" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>


<tr>

<td align=left><font class="rtitle">Страницы:</font>
<a class="rtitle" href="1.html">&laquo;</a> <font class="stitle">|</font>


<a class="rtitle" href="1.html">1</a>
<font class="stitle">|</font>

<font class="rtitle">2</font>

<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>


<a class="rtitle" href="4.html">4</a>
<font class="stitle">|</font>


<a class="rtitle" href="5.html">5</a>
<font class="stitle">|</font>


<a class="rtitle" href="6.html">6</a>
<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/11/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="3.html"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/11/javapl_11.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>


	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/11/2.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2>


    
        
        <h4 >Container</h4>
            
            <p >Контейнер описывается классом <span class="texample">Container</span>, который является наследником <span class="texample">Component</span>, а значит, обладает всеми свойствами графического компонента. Однако основная его задача – группировать другие компоненты. Для этого в нем объявлен целый ряд методов. Для добавления служит метод <span class="texample">add</span>, для удаления – <span class="texample">remove</span> и <span class="texample">removeAll</span> (последний удаляет все компоненты).</p>
            <p >Добавляемые компоненты хранятся в упорядоченном списке, поэтому для удаления можно указать либо ссылку на компонент, который и будет удален, либо его порядковый номер в контейнере. Также определены методы для получения компонент, присутствующих в контейнере, – все они довольно очевидны, поэтому перечислим их с краткими пояснениями:</p>
            <ul >
                <li>
                    <span class="texample">getComponent(int n)</span> – возвращает компонент с указанным порядковым номером;</li>
                <li>
                    <span class="texample">getComponents()</span> – возвращает все компоненты в виде массива;</li>
                <li>
                    <span class="texample">getComponentCount()</span> – возвращает количество компонент;</li>
                <li>
                    <span class="texample">getComponentAt(int x, int y)</span> или (<span class="texample">Point p</span>) – возвращает компонент, который включает в себя указанную точку;</li>
                <li>
                    <span class="texample">findComponentAt(int x, int y)</span> или (<span class="texample">Point p</span>) – возвращает видимый компонент, включающий в себя указанную точку.</li>
            </ul>
            <p >Мы уже знаем, что положение компонента (<span class="texample">location</span>) задается координатами левого верхнего угла. Важно, что эти значения отсчитываются от левого верхнего угла контейнера, который таким образом является центром системы координат для каждого находящегося в нем компонента. Если важно расположение компонента на экране безотносительно его контейнера, можно воспользоваться методом <span class="texample">getLocationOnScreent</span>.</p>
            <p >Благодаря наследованию контейнер также имеет свойство <span class="texample">size</span>. Этот размер задается независимо от размера и положения вложенных компонент. Таким образом, компоненты могут располагаться частично или полностью за пределами своего контейнера (что это означает, будет рассмотрено ниже, но принципиально это допустимо).</p>
            <p >Раз контейнер наследуется от <span class="texample">Component</span>, он сам является компонентом, а значит, может быть добавлен в другой, вышестоящий контейнер. В то же время компонент может находиться лишь в одном контейнере. Это означает, что все элементы сложного пользовательского интерфейса объединяются в иерархическое дерево. Такая организация не только облегчает операции над ними, но и задает основные свойства всей работы AWT. Одним из них является принцип отрисовки компонентов.
</p>
        
        <h4 >Алгоритм отрисовки</h4>
            
            <p >Начнем с отрисовки отдельного компонента – что определяет его внешний вид?</p>
            <p >Для этой задачи предназначен метод <span class="texample">paint</span>. Этот метод вызывается каждый раз, когда необходимо отобразить компонент на экране. У него есть один аргумент, тип которого – абстрактный класс <span class="texample">Graphics</span>. В этом классе определено множество методов для отрисовки простейших графических элементов – линий, прямоугольников и многоугольников, окружностей и овалов, текста, картинок и т.д.</p>
            <p >Наследники класса <span class="texample">Component</span> переопределяют метод <span class="texample">paint</span> и, пользуясь методами <span class="texample">Graphics</span>, задают алгоритм прорисовки своего внешнего вида:</p>
            <div  class="example"><pre>public void paint(Graphics g) {
   g.drawLine(0, 0, getWidth(), getHeight());
   g.drawLine(0, getHeight(), getWidth(), 0);
} </pre></div>
            <p >В этом примере компонент будет отображаться двумя линиями, проходящими по его диагоналям:</p>
            <p  align="center"><a name=""></a><img src="11pic1.gif" alt=""><br><b>Рис. 
            </b> </p>
        
        <h4 >Методы класса Graphics для отрисовки</h4>
            
            <p >Рассмотрим обзорно методы класса <span class="texample">Graphics</span>, предназначенные для отрисовки.</p>
            <h5 >drawLine(x1, y1, x2, y2)</h5>
                
                <p >Этот метод отображает линию толщиной в 1 пиксел, проходящую из точки (<span class="texample">x1</span>, <span class="texample">y1</span>) в (<span class="texample">x2</span>, <span class="texample">y2</span>). Именно он использовался в предыдущем примере.</p>
            
            <h5 >drawRect(int x, int y, int width, int height)</h5>
                
                <p >Этот метод отображает прямоугольник, чей левый верхний угол находится в точке (<span class="texample">x</span>, <span class="texample">y</span>), а ширина и высота равняются <span class="texample">width</span> и <span class="texample">height</span> соответственно. Правая сторона пройдет по линии <span class="texample">x+width</span>, а нижняя – <span class="texample">y+height</span>.</p>
                <p >Предположим, мы хотим дополнить предыдущий пример рисованием рамки вокруг компонента (периметр). Понятно, что левый верхний угол находится в точке <span class="texample">(0, 0)</span>. Если ширина компонента равна, например, 100 пикселам, то координата <span class="texample">x</span> пробегает значения от 0 до 99. Это означает, что ширина и высота рисуемого прямоугольника должны быть уменьшены на единицу. На самом деле по той же причине в предыдущем примере такое уменьшение на единицу должно присутствовать и в остальных методах:</p>
                <div  class="example"><pre>
public void paint(Graphics g) {
  g.drawLine(0,0,getWidth()-1, getHeight()-1);
  g.drawLine(0,getHeight()-1, getWidth()-1,0);
  g.drawRect(0,0,getWidht()-1, getHeight()-1);
} </pre></div>
                <p >В результате компонент примет следующий вид:</p>
                <p  align="center"><a name=""></a><img src="11pic2.gif" alt=""><br><b>Рис. 
            </b> </p>
            
            <h5 >fillRect(int x, int y, int width, int height)</h5>
                
                <p >Этот метод закрашивает прямоугольник. Левая и правая стороны прямоугольника проходят по линиям <span class="texample">x</span> и <span class="texample">x+width-1</span> соответственно, а верхняя и нижняя – <span class="texample">y</span> и <span class="texample">y+height-1</span> соответственно. Таким образом, чтобы зарисовать все пикселы компонента, необходимо передать следующие аргументы:</p>
                <div  class="example"><pre>g.fillRect(0, 0, getWidth(), getHeight());</pre></div>
            
            <h5 >drawOval(int x, int y, int width, int height)</h5>
                
                <p >Этот метод рисует овал, вписанный в прямоугольник, задаваемый указанными параметрами. Очевидно, что если прямоугольник имеет равные стороны (т.е. является квадратом), овал становится окружностью.</p>
                <p >Снова для того, чтобы вписать овал в границы компонента, необходимо вычесть по единице из ширины и высоты:</p>
                <div  class="example"><pre>
g.drawRect(0, 0, getWidht()-1, getHeight()-1);
g.drawOval(0, 0, getWidth()-1, getHeight()-1);
</pre></div>
                <p >Результат:</p>
                <p  align="center"><a name=""></a><img src="11pic3.gif" alt=""><br><b>Рис. 
            </b> </p>
            
            <h5 >fillOval(int x, int y, int width, int height)</h5>
                
                <p >Этот метод закрашивает указанный овал.</p>
            
            <h5 >drawArc(int x, int y, int width, int height, int startAngle, int arcAngle)</h5>
                
                <p >Этот метод рисует дугу – часть овала, задаваемого первыми четырьмя параметрами. Дуга начинается с угла <span class="texample">startAngle</span> и имеет угловой размер <span class="texample">arcAngle</span>. Начальный угол соответствует направлению часовой стрелки, указывающей на 3 часа. Угловой размер отсчитывается против часовой стрелки. Таким образом, размер в 90 градусов соответствует дуге в четверть овала (верхнюю правую). Углы "растянуты" в соответствии с размером прямоугольника. В результате, например, угловой размер в 45 градусов всегда задает границу дуги по линии, проходящей из центра прямоугольника в его правый верхний угол.</p>
            
            <h5 >fillArc(int x, int y, int width, int height, int startAngle, int arcAngle)</h5>
                
                <p >Этот метод закрашивает сектор, ограниченный дугой, задаваемой параметрами.</p>
            
            <h5 >drawString(String text, int x, int y)</h5>
                
                <p >Этот метод выводит на экран текст, задаваемый первым параметром. Точка <span class="texample">(x, y)</span> задает позицию самого левого символа. Для наглядности приведем пример:</p>
                <div  class="example"><pre>g.drawString("abcdefgh", 15, 15);
g.drawLine(15, 15, 115, 15);</pre></div>
                <p >Результатом будет:</p>
                <p  align="center"><a name=""></a><img src="11pic4.gif" alt=""><br><b>Рис. 
            </b> </p>
            
        
        <h4 >Состояние Graphics</h4>
            
            <p >Экземпляр класса <span class="texample">Graphics</span> хранит параметры, необходимые для отрисовки. Рассмотрим их по порядку.</p>
            <h5 >Цвет</h5>
                
                <p >Очевидно, что для отрисовки линий, овалов, текста и т.д. необходимо использовать тот или иной цвет. По умолчанию он задается свойством <span class="keyword">foreground</span> компонента. В любой момент его можно изменить с помощью метода <span class="texample">setColor</span>.</p>
                <p >Рассмотрим пример:</p>
                <div  class="example"><pre>
public void paint(Graphics g) {
  for (int i=0; i&lt;4; i++) {
    for (int j=0; j&lt;4; j++) {
      int c = (int)((i+j)/6.*255);
      g.setColor(new Color(c, c, c));
      g.fillRect(i*getWidth()/4, 
        j*getHeight()/4, getWidth()/4, 
         getHeight()/4);
    }
  }
} 
</pre></div>
                <p >В результате компонент будет иметь следующий вид:</p>
                <p  align="center"><a name=""></a><img src="11pic5.gif" alt=""><br><b>Рис. 
            </b> </p>
                <p >Узнать текущее значение цвета для отрисовки можно с помощью метода <span class="texample">getColor</span>.</p>
            
            <h5 >Шрифт</h5>
                
                <p >Метод <span class="texample">drawString</span> не имеет аргумента, задающего шрифт для вывода текста на экран. Этот параметр также является частью состояния <span class="texample">Graphics</span>. Его значение по умолчанию задается соответствующим свойством компонента, однако может быть изменено с помощью метода <span class="texample">setFont</span>. Для получения текущего значения служит метод <span class="texample">getFont</span>.</p>
            
            <h5 >Clip (ограничитель)</h5>
                
                <p >Хотя методы класса <span class="texample">Graphics</span> могут принимать любые значения аргументов, задающих значения координат (в пределах типа <span class="texample">int</span>), существует дополнительный ограничитель – <span class="texample">clip</span>. Любые изменения вне этого ограничителя на экране появляться не будут. Например, если вызвать метод <span class="texample">drawLine(-100, -100, 1000, 1000)</span>, то на компоненте отобразится лишь часть линии, которая помещается в его границы.</p>
                <p >Размеры ограничителя можно изменять. Метод <span class="texample">clipRect(int x, int y, int width, int height)</span> вычисляет пересечение указанного прямоугольника и текущей области <span class="texample">clip</span>. Результат станет новым ограничителем. Таким образом, этот метод может только сужать область <span class="texample">clip</span>. Метод <span class="texample">setClip(int x, int y, int width, int height)</span> устанавливает ограничитель произвольно в форме прямоугольника. Метод <span class="texample">getClipBounds</span> возвращает текущее значение в виде объекта <span class="texample">Rectangle</span>.</p>
                <p >При появлении приложения на экране каждый видимый компонент должен быть отрисован полностью. Поэтому при первом вызове метода <span class="texample">paint</span>, как правило, область <span class="texample">clip</span> совпадает с границами компонента. Однако при дальнейшей работе это не всегда так.</p>
                <p >Рассмотрим следующий пример:</p>
                <div  class="example"><pre>
public void paint(Graphics g) {
   Color c = new Color(
     (int)(Math.random()*255), 
    (int)(Math.random()*255), 
    (int)(Math.random()*255));
   g.setColor(c);
   //g.setClip(null);
   g.fillRect(0, 0, getWidth(), getHeight());
} 
</pre></div>
                <p >Как видно из кода, при каждом вызове метода <span class="texample">paint</span> генерируется новое значение цвета, после чего этим цветом закрашивается весь компонент. Однако поскольку в <span class="texample">Graphics</span> есть ограничитель, закрашена будет только область <span class="texample">clip</span>, что позволит ее увидеть.</p>
                <p >После запуска программы компонент будет полностью окрашен одним цветом. Если теперь с помощью мыши "взять" окно какого-нибудь другого приложения и медленно "провести" им поверх компонента, то он окрасится примерно таким образом (левая картинка):</p>
                <p  align="center"><a name=""></a><img src="11pic6.gif" alt=""><br><b>Рис. 
            </b> </p>
                <p >Если же провести быстро, то получится картинка, подобная правой в примере выше. Хорошо видно, что компонент перерисовывается не полностью, а частями. Ограничитель выставляется в соответствии с той областью, которая оказалась "повреждена" и нуждается в перерисовке. Для сложных компонентов можно ввести логику, которая, используя <span class="texample">clip</span>, будет отрисовывать не все элементы, а только некоторые из них, для увеличения производительности.</p>
                <p >В примере закомментирована одна строка, в которой передается значение <span class="texample">null</span> в метод <span class="texample">setClip</span>. Такой вызов снимает все ограничения, поэтому компонента каждый раз будет перекрашиваться полностью, меняя при этом цвет. Однако никаким образом нельзя изменить состояние пикселов вне компонента – ограничитель не может быть шире, чем границы компонента.</p>
            
        
        <h4 >Методы repaint и update</h4>
            
            <p >Кроме <span class="texample">paint</span> в классе <span class="texample">Component</span> объявлены еще два метода, отвечающие за прорисовку компонента. Как было рассмотрено, вызов <span class="texample">paint</span> инициируется операционной системой, если возникает необходимость перерисовать окно приложения, или часть его. Однако может потребоваться обновить внешний вид, руководствуясь программной логикой. Например, отобразить результат операции вычисления, или работы с сетью. Можно изменить состояние компонента (значение его полей), но операционная система не отследит такое изменение и не инициирует перерисовку.</p>
            <p >Для программной инициализации перерисовки компонента служит метод <span class="texample">repaint</span>. Конечно, у него нет аргумента типа <span class="texample">Graphics</span>, поскольку программист не должен создавать экземпляры этого класса (точнее, его наследников, ведь <span class="texample">Graphics</span> – абстрактный класс). Метод <span class="texample">repaint</span> можно вызывать без аргументов. В этом случае компонент будет перерисован максимально быстро. Можно указать аргумент типа <span class="texample">long</span> – количество миллисекунд. Система инициализирует перерисовку спустя указанное время. Можно указать четыре числа типа<span class="texample"> int</span> (<span class="texample">x, y, width, height</span>), задавая прямоугольную область компонента, которая нуждается в перерисовке. Наконец, можно указать все 5 параметров – и задержку по времени, и область перерисовки.</p>
            <p >Если перерисовка инициируется приложением, то система вызывает не метод <span class="texample">paint</span>, а метод <span class="texample">update</span>. У него уже есть аргумент типа <span class="texample">Graphics</span> и по умолчанию он лишь закрашивает всю область компонента фоновым цветом (свойство <span class="keyword">background</span>), а затем вызывает метод <span class="texample">paint</span>. Зачем же было вводить этот дополнительный метод, если можно было сразу вызвать <span class="texample">paint</span>? Дело в том, что поскольку перерисовка инициируется приложением, для сложных компонентов становится возможной некоторая оптимизация обновления внешнего вида. Например, если изменение заключается в появлении нового графического элемента, то можно избежать повторной перерисовки остальных элементов – переопределить метод <span class="texample">update</span> и реализовать в нем отображение одного только нового элемента. Если же компонент имеет простую структуру, можно оставить метод <span class="texample">update</span> без изменений.</p>
        
        <h4 >Прорисовка контейнера</h4>
            
            <p >Теперь, когда известно, как работает прорисовка компонента, перейдем к рассмотрению контейнера. Для его корректного отображения необходимо выполнить два действия. Во-первых, нарисовать сам контейнер, ведь он является наследником компоненты, а значит, имеет метод <span class="texample">paint</span>, который может быть переопределен для задания особенного внешнего вида такого контейнера. Во-вторых, инициировать отрисовку всех компонентов, вложенных в него.</p>
            <p >Первый шаг ничем не отличается от прорисовки обычного компонента. Как правило, контейнер не содержит никаких особых элементов отображения, ведь основную его площадь занимают вложенные компоненты. Поэтому перейдет ко второму шагу.</p>
            <p >Если контейнер не пустой, значит, в нем есть одна или несколько компонент. Они будут отрисованы последовательно в том порядке, в каком были добавлены. Однако недостаточно просто в цикле вызвать метод <span class="texample">paint</span> для каждого компонента.</p>
            <p >Во-первых, если компонента невидима (свойство <span class="texample">visible</span> выставлено в <span class="texample">false</span>), то, очевидно, метод <span class="texample">paint</span> у нее вызываться не должен.</p>
            <p >Во-вторых, центр координат компонента находится в левом верхнем углу его контейнера, а у контейнера – в левом верхнем углу его контейнера. Таким образом, при переходе от отрисовки контейнера к отрисовке лежащего в нем компонента необходимо изменить (перенести) центр системы координат.</p>
            <p >Затем необходимо установить <span class="texample">clip</span> в соответствии с размером очередного компонента. Необходимо выставить значения по умолчанию для цвета и шрифта, тем более что предыдущий компонент мог изменить их непредсказуемым образом.</p>
            <p >В итоге получается более удобным создать новый экземпляр <span class="texample">Graphics</span> для каждого компонента. Для этого существует метод <span class="texample">create</span>, который порождает копию <span class="texample">Graphics</span>, причем ему можно передать аргументы (<span class="texample">int x, int y, int width, int height</span>). В результате у нового <span class="texample">Graphics</span> будет смещен центр координат в точку (<span class="texample">x, y</span>), а <span class="texample">clip</span>-область будет получена пересечением существующего ограничителя с прямоугольником (<span class="texample">0, 0, width, height</span>) (в новых координатах). Метод <span class="texample">create</span> создает копию без изменения этих параметров.</p>
            <p >Такие копии бывает удобно порождать и в рамках одного вызова метода <span class="texample">paint</span>, если в нем описан слишком сложный алгоритм. После использования такого объекта <span class="texample">Graphics</span> его необходимо особым образом освобождать – вызовом метода <span class="texample">dispose()</span>. Если необходимо только сместить точку отсчета координат, можно использовать метод <span class="texample">translate (int x, int y)</span>.</p>
            <p >Таким образом, контейнер своим методом <span class="texample">paint</span> отрисовывает себя и все вложенные в него компоненты. Если какие-то из них, в свою очередь, являются контейнерами, то процесс иерархически продолжается вглубь. В итоге весь AWT интерфейс, каким бы сложным он ни был, состоит из дерева контейнеров и компонент, отрисовка которых начинается с самого верхнего контейнера и по ветвям развивается вглубь до каждого видимого компонента.</p>
            <p >Отдельный интерес представляет этот самый верхний контейнер. Как правило, это окно операционной системы, одновременно являющееся контейнером для Java-компонент. Именно операционная система инициализирует процесс отрисовки, отвечает за сворачивание и разворачивание окна, изменение его размера и так далее. Со стороны Java для работы с окном используется класс <span class="texample">Window</span>, который является наследником <span class="texample">Container</span> и рассматривается ниже.</p>


    
	</td>		
	</tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2 align="center">

<a href="3.html" class="attention">Перейти к следующей странице &raquo;</b></a>

	</td></tr>
	<tr><td height="16" colspan=2><img src="../../../img/empty.gif" width="1" height="16"></td></tr>

<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/11/2.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr>

<td align=left><font class="rtitle">Страницы:</font>
<a class="rtitle" href="1.html">&laquo;</a> <font class="stitle">|</font>


<a class="rtitle" href="1.html">1</a>
<font class="stitle">|</font>

<font class="rtitle">2</font>

<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>


<a class="rtitle" href="4.html">4</a>
<font class="stitle">|</font>


<a class="rtitle" href="5.html">5</a>
<font class="stitle">|</font>


<a class="rtitle" href="6.html">6</a>
<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/11/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="3.html"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/11/javapl_11.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	</table>
	<!-- /content -->

</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- rightcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">
	<!---->


<!--Основные понятия-->
	<td class="bordo" height="24">&nbsp;&nbsp;Ключевые слова</td>
	</tr>
	<tr>
	<td><span class="rtxt"><span  class="keyword_list">background</span>, <span  class="keyword_list">foreground</span><br ><br ><a  class="allnews" href="../keywords.html">все ключевые слова »</a>
</td>
	</tr>
	<tr><td>&nbsp;</td></tr>
<!--/Основные понятия-->

		<tr><td class="bordo" height="24">&nbsp;&nbsp;Информация о лекции</td></tr>
	<tr>
	<td>
<span class="rtxt">Эта лекция начинает рассмотрение базовых библиотек Java, которые являются неотъемлимой частью языка и входят в его спецификацию, а именно описывается пакет java.awt, предоставляющий технологию AWT для создания графического (оконного) интерфейса пользователя – GUI. Ни одна современная программа, предназначенная для пользователя, не обходится без удобного, понятного, в идеале – красивого пользовательского интерфейса. С самой первой версии в Java существует специальная технология для создания GUI. Она называется AWT, Abstract Window Toolkit. Именно о ней пойдет речь в этой лекции. Пакет java.awt претерпел, пожалуй, больше всего изменений с развитием версий Java. Мы рассмотрим дерево компонентов, доступных программисту, специальную модель сообщений, позволяющую гибко обрабатывать пользовательские действия, и другие особенности AWT – работа с цветами, шрифтами, отрисовка графических примитивов, менеджеры компоновки и т.д. Хотя технология AWT включает в себя гораздо больше, чем можно изложить в рамках одной лекции, здесь собраны все необходимые сведения для создания полноценного оконного интерфейса.

	</td>
	</tr>
	<tr><td>&nbsp;</td></tr>

	

	
	<td class="bordo" height="24">&nbsp;&nbsp;Учебники к курсу</td>
	</tr>
	<tr>
<td>

		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td>

<table border="0" cellpadding="1" cellspacing="0"  align="left" hspace="5" vspace="2"><tr><td class="orang"><table border="0" cellpadding="2" cellspacing="0" bgcolor="#ffffff"><tr><td valign="middle" align="center"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325"><img width="72" height="105" src="../../../img/covers/i/in/int/intu006.jpg" alt="Программирование на Java" border="0"></a></td></tr></table></td></tr></table>

<a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325" class="spectitle">
Программирование на Java</a>
<br>
<font class="spectxt">
Вязовик Н.А.,
<br>
Интернет-университет информационных технологий - ИНТУИТ.ру.
<br>
Курс лекций посвящен современному и мощному языку программирования Java. В его рамках дается вводное изложение принципов ООП, необходимое для разработки на Java, основы языка, библиотеки для работы с файлами, сетью, для построения оконного интерфейса пользователя (GUI) и др.

</font>
		</td>
		</tr>

		</table>

</td>
	</tr>


	<tr><td height="10"><img src="../../../img/empty.gif" width="1" height="10"></td></tr>



	<tr>
<td>
		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td class="spectxt">
<span class="spectitle"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=1412049" class="spectitle">Приемы объектно-ориентированного проектирования. Паттерны проектирования</a></span>
<br>
Гамма Э. и др.,
Питер.
		</td>
		</tr>


		</table>

</td>
	</tr>


<tr>
<td><a href="http://www.intuit.ru/cgi-bin/goto.fcgi?mode=books_of_course&cid=57" class="allnews">все книги по курсу &raquo;</a></td>
</tr>



	</table>
	<!-- /rightcolumn -->
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
</tr>
</table>

<!-- /bottom -->
<table border="0" cellpadding="0" cellspacing="6" width="100%" height="73">
<tr>
<td align="center" class="menu">
    <table border="0" cellpadding="0" cellspacing="0" background="">
    <tr>
    <td class="copy">
    <a href="http://www.intuit.ru/all_departments.html" class="bot">Кафедры</a> |
    <a href="http://www.intuit.ru/all_courses.html" class="bot">Все курсы</a> |
    <a href="http://www.intuit.ru/syllabus.html" class="bot">Расписание</a> |
    <a href="http://www.intuit.ru/shop/catalog/index.html?" class="bot">Учебники</a> | 
    <a href="http://www.intuit.ru/news.html" class="bot">Новости</a> | 
    <a href="http://www.intuit.ru/department/forum/" class="bot">Форум</a>
    <br>
    <a href="http://www.intuit.ru/user/classes/" class="bot">Мои курсы</a> | 
    <a href="http://www.intuit.ru/user/adjustments/" class="bot">Личные настройки</a> | 
    <a href="http://www.intuit.ru/user/cart/" class="bot">Корзина</a> | 
    <a href="http://www.intuit.ru/help/" class="bot">Помощь</a><br><br>
    Телефон: (095) 253-9312, 253-9313, факс: (095) 253-9310, email: <a href="http://www.intuit.ru/help/askform.xhtml" class="bot">info@intuit.ru</a><br>
    Адрес: 123056 Москва, Электрический пер., 8, стр. 3<br>
    &copy; 2003-2004 INTUIT.ru. Все права защищены.
    </td>
    </tr>
    </table>
</td>
</tr>
</table>
<!-- /bottom -->


</body>
</html>
