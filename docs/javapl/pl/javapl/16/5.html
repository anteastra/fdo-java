<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>INTUIT.ru::Интернет-Университет Информационных Технологий</title>
<link rel="shortcut icon" href="http://www.intuit.ru/favicon.ico">


<META http-equiv="Pragma" CONTENT="no-cache">
<META http-equiv="Cache-Control" CONTENT="no-cache, must-revalidate">
<META NAME="Pragma" CONTENT="no-cache">
<META NAME="Cache-Control" CONTENT="no-cache">
<link href="../../../ssi/style.css" type="text/css" rel="stylesheet">
</head>
<body leftmargin="0" topmargin="6" marginheight="6" marginwidth="0" bgcolor="white">

<!-- header -->
<!---->
<table border="0" cellpadding="8" cellspacing="0" width="100%">
<tr valign="top">
<td><a href="http://www.intuit.ru/"><img src="../../../img/logo.gif" border="0" width="285" height="52" alt="Интернет Университет информационных технологий"></a></td>
<!---->
</tr>
</table>

<!-- /header -->

<!-- /menu -->
<table border="0" cellpadding="" cellspacing="6" width="100%">
<tr>
<td align="center" class="menu">
	<table border="0" cellpadding="0" cellspacing="0" background="" height="31">
	<tr>
	<td><a href="http://www.intuit.ru/speciality/" class="menu">Учебные программы</a></td>
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_departments.html" class="menu">Кафедры</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_courses.html" class="menu">Все курсы</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/syllabus.html" class="menu">Расписание</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/shop/" class="menu">Учебники</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/news.html" class="menu">Новости</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/department/forum/" class="menu">Форум</a></td>
<!--
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/help/" class="menu">Помощь</a></td>		
-->
	</tr>
	</table>	

</td>
</tr>
</table>
<!-- /menu -->


<table border="0" cellpadding="0" cellspacing="0" width="100%" height="73">
<tr valign="top">
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- leftcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">

		<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Лекции</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>

		<td colspan=3>
<a href="../index.html" class="spec">Программирование на Java</a>


</td>
		</tr>
<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">1.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../1/1.html" class="llecture">Что такое Java? История создания</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">2.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../2/1.html" class="llecture">Основы объектно-ориентированного...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">3.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../3/1.html" class="llecture">Лексика языка</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">4.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../4/1.html" class="llecture">Типы данных</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">5.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../5/1.html" class="llecture">Имена. Пакеты</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">6.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../6/1.html" class="llecture">Объявление классов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">7.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../7/1.html" class="llecture">Преобразование типов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">8.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../8/1.html" class="llecture">Объектная модель в Java</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">9.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../9/1.html" class="llecture">Массивы</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">10.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../10/1.html" class="llecture">Операторы и структура кода. Искл...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">11.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../11/1.html" class="llecture">Пакет java.awt</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">12.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../12/1.html" class="llecture">Потоки выполнения. Синхронизация</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">13.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../13/1.html" class="llecture">Пакет java.lang</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">14.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../14/1.html" class="llecture">Пакет java.util</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">15.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../15/1.html" class="llecture">Пакет java.io</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">16.</td>
		<td>&nbsp;</td>
<td class="llecture">


<a href="../16/1.html" class="llecture_selected">Введение в сетевые протоколы</a>


</td>
		</tr>






<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="http://www.intuit.ru/department/pl/javapl/class/examination/" class="llecture">Экзамен</a></td>
		</tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a class="llecture_red" href="http://www.intuit.ru/department/pl/javapl/class/examination_extern/">Сдать экзамен экстерном</a></td>
		</tr>

<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../lit.html" class="llecture">Литература</a></td>
		</tr>





		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../keywords.html" class="llecture">Предметный указатель</a></td>
		</tr>



		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../examples.html" class="llecture">Примеры</a></td>
		</tr>


		</table><br>
	</td>
	</tr>


	

	<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Общение</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/classmates/" class="spec">однокурсники</a></td>
		</tr>
		

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/forum/" class="spec">форум по курсу</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/question_for_lector/" class="spec">вопрос преподавателю</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/opinions/" class="spec">мнения о курсе</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/rating/" class="spec">рейтинг выпускников</a></td>
		</tr>


		</table><br>
	</td>
	</tr>



<tr><td height="1"><a href="../robot.html"><img src="../../../img/empty.gif" width="1" height="1" border="0"></a></td></tr>

	</table>

	<!-- #include virtual="~/inc/leftcolumn.html" -->
	<!-- /leftcolumn -->	
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td>
	<!-- content -->
	<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr><td class="head" colspan=2>Программирование на Java</td></tr>
<tr><td colspan=2 height="4"><img src="../../../img/empty.gif" width="1" height="4"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>




<tr>
<td colspan="2" align=left class="headsub">Лекция #16: <a href="../16/1.html">Введение в сетевые протоколы</a></td>
</tr>

<tr><td height="6" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>


<tr>

<td align=left><font class="rtitle">Страницы:</font>
<a class="rtitle" href="4.html">&laquo;</a> <font class="stitle">|</font>


<a class="rtitle" href="1.html">1</a>
<font class="stitle">|</font>


<a class="rtitle" href="2.html">2</a>
<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>


<a class="rtitle" href="4.html">4</a>
<font class="stitle">|</font>

<font class="rtitle">5</font>

<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/16/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/16/test/"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/16/javapl_16.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>


	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/16/5.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2>


    
    <h3 >Пакет java.net</h3>
        
        <p >
      Перейдем к рассмотрению средств Java для работы с сетью.
    </p>
        <p >
      Классы, работающие с сетевыми протоколами, располагаются в пакете <span class="texample">java.net</span>,
      и простейшим из них является класс URL. С его помощью можно сконструировать
      uniform resource locator (URL), который имеет следующий формат:
    </p>
        <div  class="example"><pre>
protocol://host:port/resource
    </pre></div>
        <p >
      Здесь <span class="texample">protocol</span> – название протокола, используемого для
      связи; <span class="texample">host</span> – IP-адрес, или DNS-имя сервера, к которому
      производится обращение; <span class="texample">port</span> – номер порта сервера (если
      порт не указан, то используется значение по умолчанию для указанного
      протокола); <span class="texample">resource</span> – имя запрашиваемого ресурса, причем,
      оно может быть составным, например:
    </p>
        <div  class="example"><pre>
ftp://myserver.ru/pub/docs/Java/JavaCourse.txt
    </pre></div>
        <p >
      Затем можно воспользоваться методом <span class="texample">openStream()</span>, который
      возвращает <span class="texample">InputStream</span>, что позволяет считать содержимое
      ресурса. Например, следующая программа при помощи <span class="texample">LineNumberReader
      </span>считывает первую страницу сайта <span class="texample">http://www.ru</span> и
      выводит ее на консоль.
    </p>
        <div  class="example"><pre>
import java.io.*;
import java.net.*;

public class Net {
  public static void main(String args[]) {
    try {
      URL url = new URL("http://www.ru");
      LineNumberReader r = 
        new LineNumberReader(new
        InputStreamReader(url.openStream()));
      String s = r.readLine();
      while (s!=null) {
        System.out.println(s);
        s = r.readLine();
      }
      System.out.println(r.getLineNumber());
      r.close();
    } catch (MalformedURLException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
}
    </pre></div>
        <p >
      Из примера мы видим, что работа с сетью, как и работа с потоками,
      требует дополнительной работы с исключительными ситуациями.
      Ошибка <span class="texample">MalformedURLException</span> появляется в случае, если
      строка c <span class="texample">URL</span> содержит ошибки.
    </p>
        <p >
      Более функциональным классом является <span class="texample">URLConnection</span>,
      который можно получить с помощью метода класса
      <span class="texample">URL.openConnection()</span>. У этого класса есть два метода –
      <span class="texample">getInputStream()</span> (именно с его помощью работает
      <span class="texample">URL.openStream()</span>) и <span class="texample">getOutputStream()</span>, который
      можно использовать для передачи данных на сервер, если он поддерживает
      такую операцию (многие публичные web-серверы закрыты для таких действий).
    </p>
        <p >
      Класс <span class="texample">URLConnection</span> является абстрактным. Виртуальная
      машина предоставляет реализации этого класса для каждого протокола,
      например, в том же пакете <span class="texample">java.net</span> определен класс
      <span class="texample">HttpURLConnection</span>. Понятно, что классы <span class="texample">URL</span> и
      <span class="texample">URLConnection</span> предоставляют возможность работы через сеть
      на прикладном уровне с помощью высокоуровневых протоколов.
    </p>
        <p >
      Пакет <span class="texample">java.net</span> также предоставляет доступ к протоколам
      более низкого уровня – TCP и UDP. Для этого сначала надо ознакомиться с
      классом <span class="texample">InetAddress</span>, который является Internet-адресом, или
      IP. Экземпляры этого класса создаются не с помощью конструкторов, а с
      помощью статических методов:
    </p>
        <div  class="example"><pre>
InetAddress getLocalHost()
InetAddress getByName(String name)
InetAddress[] getAllByName(String name)
    </pre></div>
        <p >
      Первый метод возвращает IP-адрес машины, на которой исполняется Java-
      программа. Второй метод возвращает адрес сервера, чье имя передается в
      качестве параметра. Это может быть как DNS-имя, так и числовой IP,
      записанный в виде текста, например, <span class="texample">"67.11.12.101"</span>.
      Наконец, третий метод определяет все IP-адреса указанного сервера.
    </p>
        <p >
      Для работы с TCP-протоколом используются классы <span class="texample">Socket</span> и
      <span class="texample">ServerSocket</span>. Первым создается <span class="texample">ServerSocket</span> –
      сокет на стороне сервера. Его простейший конструктор имеет только один
      параметр – номер порта, на котором будут приниматься входящие запросы.
      После создания вызывается метод <span class="texample">accept()</span>, который
      приостанавливает выполнение программы и ожидает, пока какой-нибудь
      клиент не инициирует соединение. В этом случае работа сервера
      возобновляется, а метод возвращает экземпляр класса <span class="texample">Socket</span>
      для взаимодействия с клиентом:
    </p>
        <div  class="example"><pre>
try {
   ServerSocket ss = new ServerSocket(3456);
   Socket client=ss.accept(); 
   // Метод не возвращает
   // управление, пока не подключится клиент
} catch (IOException e) {
   e.printStackTrace();
}
    </pre></div>
        <p >
      Клиент для подключения к серверу также использует класс <span class="texample">Socket</span>.
      Его простейший конструктор принимает два параметра - адрес сервера (в
      виде строки, или экземпляра <span class="texample">InetAddress</span>) и номер порта.
      Если сервер принял запрос, то сокет конструируется успешно и далее можно
      воспользоваться методами <span class="texample">getInputStream()</span> или
      <span class="texample">getOutputStream()</span>.
    </p>
        <div  class="example"><pre>
try {
   Socket s = new Socket("localhost", 3456);
   InputStream is = s.getInputStream();
   is.read();
} catch (UnknownHostException e) {
   e.printStackTrace();
} catch (IOException e) {
   e.printStackTrace();
}
    </pre></div>
        <p >
      Обратите внимание на обработку исключительной ситуации
      <span class="texample">UnknownHostException</span>, которая будет генерироваться, если
      виртуальная машина с помощью операционной системы не сможет распознать
      указанный адрес сервера в случае, если он задан строкой. Если же он
      задан экземпляром <span class="texample">InetAddress</span>, то эту ошибку надо
      обрабатывать при вызове статических методов данного класса.
    </p>
        <p >
      На стороне сервера класс <span class="texample">Socket</span> используется точно таким же
      образом – через методы <span class="texample">getInputStream()</span> и
      <span class="texample">getOutputStream()</span>. Приведем более полный пример:
    </p>
        <div  class="example"><pre>
import java.io.*;
import java.net.*;
public class Server {
  public static void main(String args[]) {
    try {
      ServerSocket ss = new ServerSocket(3456);
      System.out.println("Waiting...");
      Socket client=ss.accept();
      System.out.println("Connected");
      client.getOutputStream().write(10);
      client.close();
      ss.close();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
}

    </pre></div>
        <p >
      Сервер по запросу клиента отправляет число 10 и завершает
      работу. Обратите внимание, что при завершении вызываются методы
      <span class="texample">close()</span> для открытых сокетов.
    </p>
        <p >
      Класс клиента:
    </p>
        <div  class="example"><pre>
import java.io.*;
import java.net.*;
public class Client {
  public static void main(String args[]) {
    try {
      Socket s = new Socket("localhost", 3456);
      InputStream is = s.getInputStream();
      System.out.println("Read: "+is.read());
      s.close();
    } catch (UnknownHostException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
}

    </pre></div>
        <p >
      После запуска сервера, а затем клиента, можно увидеть результат –
      полученное число, 10, после чего обе программы закроются.
    </p>
        <p >
      Рассмотрим эти классы более подробно. Во-первых, класс
      <span class="texample">ServerSocket</span> имеет конструктор, в который передается, кроме
      номера порта, еще и адрес машины. Это может показаться странным, ведь
      сервер открывается на той же машине, где работает программа, зачем
      специально указывать ее адрес? Однако, если компьютер имеет несколько
      сетевых интерфейсов
      (<span class="keyword">сетевых карточек</span>),
      то он имеет и несколько сетевых адресов. С помощью такого детализированного
      конструктора можно указать, по какому именно адресу ожидать подключения.
      Это должен быть именно локальный адрес машины, иначе возникнет ошибка.
    </p>
        <p >
      Аналогично, класс <span class="texample">Socket</span> имеет расширенный конструктор для
      указания как локального адреса, с которого будет устанавливаться
      соединение, так и локального порта (иначе операционная система выделяет
      произвольный свободный порт).
    </p>
        <p >
      Во-вторых, можно воспользоваться методом <span class="texample">setSoTimeout(int timeout)
      </span> класса <span class="texample">ServerSocket</span>, чтобы указать время в
      миллисекундах, на протяжении которого нужно ожидать подключение клиента.
      Это позволяет серверу не "зависать", если никто не пытается начать с ним
      работать. Тайм-аут задается в миллисекундах, нулевое значение означает
      бесконечное время ожидания.
    </p>
        <p >
      Важно подчеркнуть, что после установления соединения с клиентом сервер
      выходит из метода <span class="texample">accept()</span>, то есть перестает быть готовым
      принимать новые запросы. Однако, как правило, желательно, чтобы сервер мог
      работать с несколькими клиентами одновременно. Для этого необходимо при
      подключении очередного пользователя создавать новый поток исполнения,
      который будет обслуживать его, а основной поток снова войдет в метод
      <span class="texample">accept()</span>. Приведем пример такого решения:
    </p>
        <a  name="example.16.2"></a><div  class="example"><span class="objectName">
            Пример 
            16.2.
            
            (<a href="example.16.2.htm" target="_blank" onClick="window.open('example.16.2.htm','','menubar=no,scrollbars=yes,resizable=yes');return false;" class="objectName">html</a>,
            <a href="example.16.2.txt" target="_blank" onClick="window.open('example.16.2.txt','','menubar=no,scrollbars=yes,resizable=yes');return false;" class="objectName">txt</a>)
            </span></div>
        <p >
      Теперь объявим клиента. Эта программа будет запускать несколько потоков,
      каждый из которых независимо подключается к серверу, считывает его ответ
      и выводит на консоль.
    </p>
        <a  name="example.16.3"></a><div  class="example"><span class="objectName">
            Пример 
            16.3.
            
            (<a href="example.16.3.htm" target="_blank" onClick="window.open('example.16.3.htm','','menubar=no,scrollbars=yes,resizable=yes');return false;" class="objectName">html</a>,
            <a href="example.16.3.txt" target="_blank" onClick="window.open('example.16.3.txt','','menubar=no,scrollbars=yes,resizable=yes');return false;" class="objectName">txt</a>)
            </span></div>
        <p >
      Теперь рассмотрим <span class="texample">UDP</span>. Для работы с этим протоколом и на
      стороне клиента, и на стороне сервера используется класс
      <span class="texample">DatagramSocket</span>. У него есть следующие конструкторы:
    </p>
        <div  class="example"><pre>
DatagramSocket()
DatagramSocket(int port)
DatagramSocket(int port, InetAddress laddr)
    </pre></div>
        <p >
      При вызове первого конструктора сокет открывается на произвольном
      доступном порту, что уместно для клиента. Конструктор с одним параметром,
      задающим порт, как правило, применяется на серверах, чтобы клиенты знали,
      на каком порту им нужно пытаться устанавливать соединение. Наконец,
      последний конструктор необходим для машин, у которых присутствует
      несколько сетевых интерфейсов.
    </p>
        <p >
      После открытия сокетов начинается обмен датаграммами. Они представляются
      экземплярами класса <span class="texample">DatagramPacket</span>. При отсылке сообщения
      применяется следующий конструктор:
    </p>
        <div  class="example"><pre>
DatagramPacket(byte[] buf, int length, 
               InetAddress address, int port)
    </pre></div>
        <p >
      Массив содержит данные для отправки (созданный пакет будет иметь длину,
      равную <span class="texample">length</span>), а адрес и порт указывают получателя пакета.
      После этого вызывается метод <span class="texample">send()</span> класса
      <span class="texample">DatagramSocket</span>.
    </p>
        <div  class="example"><pre>
try {
   DatagramSocket s = new DatagramSocket();
   byte data[]={1, 2, 3};
   InetAddress addr = 
      InetAddress.getByName("localhost");
   DatagramPacket p = 
      new DatagramPacket(data, 3, addr, 3456);
   s.send(p);
   System.out.println("Datagram sent");
   s.close();
} catch (SocketException e) {
   e.printStackTrace();
} catch (UnknownHostException e) {
   e.printStackTrace();
} catch (IOException e) {
   e.printStackTrace();
}
    </pre></div>
        <p >
      Для получения датаграммы также создается экземпляр класса
      <span class="texample">DatagramPacket</span>, но в конструктор передается лишь массив, в
      который будут записаны полученные данные (также указывается ожидаемая
      длина пакета). Сокет необходимо создать с указанием порта, иначе, скорее
      всего, сообщение просто не дойдет до адресата. Используется метод
      <span class="texample">receive()</span> класса <span class="texample">DatagramSocket</span> (аналогично
      методу <span class="texample">ServerSocket.accept()</span>, этот метод также прерывает
      выполнение потока, пока не придет запрос от клиента). Пример реализации
      получателя:
    </p>
        <div  class="example"><pre>
try {
   DatagramSocket s = 
      new DatagramSocket(3456);
   byte data[]=new byte[3];
   DatagramPacket p = 
      new DatagramPacket(data, 3);
   System.out.println("Waiting...");
   s.receive(p);
   System.out.println("Datagram received: "+
      data[0]+", "+data[1]+", "+data[2]);
   s.close();
} catch (SocketException e) {
   e.printStackTrace();
} catch (IOException e) {
   e.printStackTrace();
}
    </pre></div>
        <p >
      Если запустить сначала получателя, а затем отправителя, то можно увидеть,
      что первый напечатает содержимое полученной датаграммы, а потом программы
      завершат свою работу.
    </p>
        <p >
      В заключение приведем пример сервера, который получает датаграммы и
      отправляет их обратно, дописав к ним слово <span class="texample">received</span>.
    </p>
        <a  name="example.16.4"></a><div  class="example"><span class="objectName">
            Пример 
            16.4.
            
            (<a href="example.16.4.htm" target="_blank" onClick="window.open('example.16.4.htm','','menubar=no,scrollbars=yes,resizable=yes');return false;" class="objectName">html</a>,
            <a href="example.16.4.txt" target="_blank" onClick="window.open('example.16.4.txt','','menubar=no,scrollbars=yes,resizable=yes');return false;" class="objectName">txt</a>)
            </span></div>
    <h3 >Заключение</h3>
        
        <p >
      В данном разделе были рассмотрены теоретические основы сети как одной
      большой взаимодействующей системы. Были описаны все уровни модели OSI и их
      функциональные назначения. Также были представлены основные утилиты,
      используемые для настройки и обнаружения неисправностей в сети. Затем были
      рассмотрены средства Java для работы с наиболее распространенными сетевыми
      проколами. Приведен подробный пример и для более сложного случая – сервер,
      обслуживающий несколько клиентов одновременно.
    </p>
    

	</td>		
	</tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2 align="center">

<a href="http://www.intuit.ru/department/pl/javapl/16/test/" class="attention">Перейти к вопросам &raquo;</a>

	</td></tr>
	<tr><td height="16" colspan=2><img src="../../../img/empty.gif" width="1" height="16"></td></tr>

<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/16/5.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr>

<td align=left><font class="rtitle">Страницы:</font>
<a class="rtitle" href="4.html">&laquo;</a> <font class="stitle">|</font>


<a class="rtitle" href="1.html">1</a>
<font class="stitle">|</font>


<a class="rtitle" href="2.html">2</a>
<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>


<a class="rtitle" href="4.html">4</a>
<font class="stitle">|</font>

<font class="rtitle">5</font>

<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/16/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/16/test/"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/16/javapl_16.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	</table>
	<!-- /content -->

</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- rightcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">
	<!---->


<!--Основные понятия-->
	<td class="bordo" height="24">&nbsp;&nbsp;Ключевые слова</td>
	</tr>
	<tr>
	<td><span class="rtxt"><span  class="keyword_list">сетевой адаптер</span><br ><br ><a  class="allnews" href="../keywords.html">все ключевые слова »</a>
</td>
	</tr>
	<tr><td>&nbsp;</td></tr>
<!--/Основные понятия-->

		<tr><td class="bordo" height="24">&nbsp;&nbsp;Информация о лекции</td></tr>
	<tr>
	<td>
<span class="rtxt">Завершает курс лекция, в которой рассматриваются возможности построения сетевых приложений. Сначала дается краткое введение в сетевые протоколы, семиуровневую модель OSI, стек протоколов TCP/IP и описываются основные утилиты, предоставляемые операционной системой для мониторинга сети. Эти значения необходимы, поскольку библиотека java.net, по сути, является интерфейсом для работы с этими протоколами. Рассматриваются классы для соединений через высокоуровневые протоколы, протоколы TCP и UDP.

	</td>
	</tr>
	<tr><td>&nbsp;</td></tr>

	

	
	<td class="bordo" height="24">&nbsp;&nbsp;Учебники к курсу</td>
	</tr>
	<tr>
<td>

		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td>

<table border="0" cellpadding="1" cellspacing="0"  align="left" hspace="5" vspace="2"><tr><td class="orang"><table border="0" cellpadding="2" cellspacing="0" bgcolor="#ffffff"><tr><td valign="middle" align="center"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325"><img width="72" height="105" src="../../../img/covers/i/in/int/intu006.jpg" alt="Программирование на Java" border="0"></a></td></tr></table></td></tr></table>

<a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325" class="spectitle">
Программирование на Java</a>
<br>
<font class="spectxt">
Вязовик Н.А.,
<br>
Интернет-университет информационных технологий - ИНТУИТ.ру.
<br>
Курс лекций посвящен современному и мощному языку программирования Java. В его рамках дается вводное изложение принципов ООП, необходимое для разработки на Java, основы языка, библиотеки для работы с файлами, сетью, для построения оконного интерфейса пользователя (GUI) и др.

</font>
		</td>
		</tr>

		</table>

</td>
	</tr>


	<tr><td height="10"><img src="../../../img/empty.gif" width="1" height="10"></td></tr>



	<tr>
<td>
		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td class="spectxt">
<span class="spectitle"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=1412049" class="spectitle">Приемы объектно-ориентированного проектирования. Паттерны проектирования</a></span>
<br>
Гамма Э. и др.,
Питер.
		</td>
		</tr>


		</table>

</td>
	</tr>


<tr>
<td><a href="http://www.intuit.ru/cgi-bin/goto.fcgi?mode=books_of_course&cid=57" class="allnews">все книги по курсу &raquo;</a></td>
</tr>



	</table>
	<!-- /rightcolumn -->
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
</tr>
</table>

<!-- /bottom -->
<table border="0" cellpadding="0" cellspacing="6" width="100%" height="73">
<tr>
<td align="center" class="menu">
    <table border="0" cellpadding="0" cellspacing="0" background="">
    <tr>
    <td class="copy">
    <a href="http://www.intuit.ru/all_departments.html" class="bot">Кафедры</a> |
    <a href="http://www.intuit.ru/all_courses.html" class="bot">Все курсы</a> |
    <a href="http://www.intuit.ru/syllabus.html" class="bot">Расписание</a> |
    <a href="http://www.intuit.ru/shop/catalog/index.html?" class="bot">Учебники</a> | 
    <a href="http://www.intuit.ru/news.html" class="bot">Новости</a> | 
    <a href="http://www.intuit.ru/department/forum/" class="bot">Форум</a>
    <br>
    <a href="http://www.intuit.ru/user/classes/" class="bot">Мои курсы</a> | 
    <a href="http://www.intuit.ru/user/adjustments/" class="bot">Личные настройки</a> | 
    <a href="http://www.intuit.ru/user/cart/" class="bot">Корзина</a> | 
    <a href="http://www.intuit.ru/help/" class="bot">Помощь</a><br><br>
    Телефон: (095) 253-9312, 253-9313, факс: (095) 253-9310, email: <a href="http://www.intuit.ru/help/askform.xhtml" class="bot">info@intuit.ru</a><br>
    Адрес: 123056 Москва, Электрический пер., 8, стр. 3<br>
    &copy; 2003-2004 INTUIT.ru. Все права защищены.
    </td>
    </tr>
    </table>
</td>
</tr>
</table>
<!-- /bottom -->


</body>
</html>
