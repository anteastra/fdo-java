<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>INTUIT.ru::Интернет-Университет Информационных Технологий</title>
<link rel="shortcut icon" href="http://www.intuit.ru/favicon.ico">


<META http-equiv="Pragma" CONTENT="no-cache">
<META http-equiv="Cache-Control" CONTENT="no-cache, must-revalidate">
<META NAME="Pragma" CONTENT="no-cache">
<META NAME="Cache-Control" CONTENT="no-cache">
<link href="../../../ssi/style.css" type="text/css" rel="stylesheet">
</head>
<body leftmargin="0" topmargin="6" marginheight="6" marginwidth="0" bgcolor="white">

<!-- header -->
<!---->
<table border="0" cellpadding="8" cellspacing="0" width="100%">
<tr valign="top">
<td><a href="http://www.intuit.ru/"><img src="../../../img/logo.gif" border="0" width="285" height="52" alt="Интернет Университет информационных технологий"></a></td>
<!---->
</tr>
</table>

<!-- /header -->

<!-- /menu -->
<table border="0" cellpadding="" cellspacing="6" width="100%">
<tr>
<td align="center" class="menu">
	<table border="0" cellpadding="0" cellspacing="0" background="" height="31">
	<tr>
	<td><a href="http://www.intuit.ru/speciality/" class="menu">Учебные программы</a></td>
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_departments.html" class="menu">Кафедры</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_courses.html" class="menu">Все курсы</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/syllabus.html" class="menu">Расписание</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/shop/" class="menu">Учебники</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/news.html" class="menu">Новости</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/department/forum/" class="menu">Форум</a></td>
<!--
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/help/" class="menu">Помощь</a></td>		
-->
	</tr>
	</table>	

</td>
</tr>
</table>
<!-- /menu -->


<table border="0" cellpadding="0" cellspacing="0" width="100%" height="73">
<tr valign="top">
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- leftcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">

		<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Лекции</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>

		<td colspan=3>
<a href="../index.html" class="spec">Программирование на Java</a>


</td>
		</tr>
<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">1.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../1/1.html" class="llecture">Что такое Java? История создания</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">2.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../2/1.html" class="llecture">Основы объектно-ориентированного...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">3.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../3/1.html" class="llecture">Лексика языка</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">4.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../4/1.html" class="llecture">Типы данных</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">5.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../5/1.html" class="llecture">Имена. Пакеты</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">6.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../6/1.html" class="llecture">Объявление классов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">7.</td>
		<td>&nbsp;</td>
<td class="llecture">

Преобразование типов



</td>
		</tr>




		<tr valign=top>

		<td class="llecture">8.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../8/1.html" class="llecture">Объектная модель в Java</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">9.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../9/1.html" class="llecture">Массивы</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">10.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../10/1.html" class="llecture">Операторы и структура кода. Искл...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">11.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../11/1.html" class="llecture">Пакет java.awt</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">12.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../12/1.html" class="llecture">Потоки выполнения. Синхронизация</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">13.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../13/1.html" class="llecture">Пакет java.lang</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">14.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../14/1.html" class="llecture">Пакет java.util</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">15.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../15/1.html" class="llecture">Пакет java.io</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">16.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../16/1.html" class="llecture">Введение в сетевые протоколы</a>
</td>
		</tr>






<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="http://www.intuit.ru/department/pl/javapl/class/examination/" class="llecture">Экзамен</a></td>
		</tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a class="llecture_red" href="http://www.intuit.ru/department/pl/javapl/class/examination_extern/">Сдать экзамен экстерном</a></td>
		</tr>

<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../lit.html" class="llecture">Литература</a></td>
		</tr>





		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../keywords.html" class="llecture">Предметный указатель</a></td>
		</tr>



		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../examples.html" class="llecture">Примеры</a></td>
		</tr>


		</table><br>
	</td>
	</tr>


	

	<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Общение</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/classmates/" class="spec">однокурсники</a></td>
		</tr>
		

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/forum/" class="spec">форум по курсу</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/question_for_lector/" class="spec">вопрос преподавателю</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/opinions/" class="spec">мнения о курсе</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/rating/" class="spec">рейтинг выпускников</a></td>
		</tr>


		</table><br>
	</td>
	</tr>



<tr><td height="1"><a href="../robot.html"><img src="../../../img/empty.gif" width="1" height="1" border="0"></a></td></tr>

	</table>

	<!-- #include virtual="~/inc/leftcolumn.html" -->
	<!-- /leftcolumn -->	
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td>
	<!-- content -->
	<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr><td class="head" colspan=2>Программирование на Java</td></tr>
<tr><td colspan=2 height="4"><img src="../../../img/empty.gif" width="1" height="4"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>




<tr>
<td colspan="2" align=left class="headsub">Лекция #7: Преобразование типов</td>
</tr>

<tr><td height="6" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>


<tr>

<td align=left><font class="rtitle">Страницы:</font>


<font class="rtitle">1</font>

<font class="stitle">|</font>


<a class="rtitle" href="2.html">2</a>
<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>


<a class="rtitle" href="4.html">4</a>
<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/7/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="2.html"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/7/javapl_7.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>


	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/7/1.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2>
<h3 >Введение</h3>
    
    <p >Как уже говорилось, Java является строго типизированным языком, а это означает, что каждое выражение и каждая переменная имеет строго определенный тип уже на момент компиляции. Тип устанавливается на основе структуры применяемых выражений и типов литералов, переменных и методов, используемых в этих выражениях.</p>
    <p >Например:</p>
	<div  class="example"><pre>
long a=3;
a = 5+'A'+a;
print("a="+Math.round(a/2F));</pre></div>
    <p >Рассмотрим, как в этом примере компилятор устанавливает тип каждого выражения и какие преобразования (conversion) типов необходимо осуществить при каждом действии.</p>
    <ul >
	    <li>В первой строке литерал <span class="texample">3</span> имеет тип по умолчанию, то есть <span class="texample">int</span>. При присвоении этого значения переменной типа <span class="texample">long</span> необходимо провести преобразование.</li>
		<li>Во второй строке сначала производится сложение значений типа <span class="texample">int</span> и <span class="texample">char</span>. Второй аргумент будет преобразован так, чтобы операция проводилось с точностью в 32 бита. Второй оператор сложения опять потребует преобразования, так как наличие переменной a увеличивает точность до 64 бит.</li>
		<li>В третьей строке сначала будет выполнена операция деления, для чего значение <span class="texample">long</span> надо будет привести к типу <span class="texample">float</span>, так как второй операнд - дробный литерал. Результат будет передан в метод <span class="texample">Math.round</span>, который произведет математическое округление и вернет целочисленный результат типа <span class="texample">int</span>. Это значение необходимо преобразовать в текст, чтобы осуществить дальнейшую конкатенацию строк. Как будет показано ниже, эта операция проводится в два этапа - сначала простой тип приводится к объектному классу-"обертке" (в данном случае <span class="texample">int</span> к <span class="texample">Integer</span>), а затем у полученного объекта вызывается метод <span class="texample">toString()</span>, что дает преобразование к строке.</li>
    </ul>
    <p >Данный пример показывает, что даже простые строки могут содержать многочисленные преобразования, зачастую незаметные для разработчика. Часто бывают и такие случаи, когда программисту необходимо явно изменить тип некоторого выражения или переменной, например, чтобы воспользоваться подходящим методом или конструктором.</p>
    <p >Вспомним уже рассмотренный пример:</p>
	<div  class="example"><pre>
byte b=1;
byte c=(byte)-b;
int i=c;</pre></div>
    <p >Здесь во второй строке необходимо провести явное преобразование, чтобы присвоить значение типа <span class="texample">byte</span> переменной типа <span class="texample">int</span>. В третьей же строке обратное приведение производится автоматически, неявным для разработчика образом.</p>
    <p >Рассмотрим сначала, какие переходы между различными типами можно осуществить.</p>
<h3 >Виды приведений</h3>
	
	<p >В Java предусмотрено семь видов приведений:</p>
	<ul >
		<li>тождественное (identity);</li>
		<li>расширение примитивного типа (widening primitive);</li>
		<li>сужение примитивного типа (narrowing primitive);</li>
		<li>расширение объектного типа (widening reference);</li>
		<li>сужение объектного типа (narrowing reference);</li>
		<li>преобразование к строке (String);</li>
		<li>запрещенные преобразования (forbidden).</li>
	</ul>
	<p >Рассмотрим их по отдельности.</p>

	<h4 >Тождественное преобразование</h4>
		
		<p >Самым простым является тождественное преобразование. В Java преобразование выражения любого типа к точно такому же типу всегда допустимо и успешно выполняется.</p>
		<p >Зачем нужно тождественное приведение? Есть две причины для того, чтобы выделить такое преобразование в особый вид.</p>
		<p >Во-первых, с теоретической точки зрения теперь можно утверждать, что любой тип в Java может участвовать в преобразовании, хотя бы в тождественном. Например, примитивный тип <span class="texample">boolean</span> нельзя привести ни к какому другому типу, кроме него самого.</p>
		<p >Во-вторых, иногда в Java могут встречаться такие выражения, как длинный последовательный вызов методов:</p>
		<div  class="example"><pre>
print(getCity().getStreet().getHouse(
      ).getFlat().getRoom());</pre></div>
		<p >При исполнении такого выражения сначала вызывается первый метод <span class="texample">getCity()</span>. Можно предположить, что возвращаемым значением будет объект класса <span class="texample">City</span>. У этого объекта далее будет вызван следующий метод <span class="texample">getStreet()</span>. Чтобы узнать, значение какого типа он вернет, необходимо посмотреть описание класса <span class="texample">City</span>. У этого значения будет вызван следующий метод (<span class="texample">getHouse()</span>), и так далее. Чтобы узнать результирующий тип всего выражения, необходимо просмотреть описание каждого метода и класса.</p>
		<p >Компилятор без труда справится с такой задачей, однако разработчику будет нелегко проследить всю цепочку. В этом случае можно воспользоваться тождественным преобразованием, выполнив приведение к точно такому же типу. Это ничего не изменит в структуре программы, но значительно облегчит чтение кода:</p>
		<div  class="example"><pre>
print((MyFlatImpl)(getCity().getStreet(
      ).getHouse().getFlat()));</pre></div>
	

	<h4 >Преобразование примитивных типов (расширение и сужение)</h4>
		
		<p >Очевидно, что следующие четыре вида приведений легко представляются в виде <a href="">таблицы 7.1</a>.</p>
		<table  border="0" cellpadding="2" cellspacing="1"><caption align="left"><b>
                    Таблица 7.1.
                    Виды приведений.</b></caption><tr>
				<td bgcolor="#eaeaea">простой тип, расширение</td>
				<td bgcolor="#eaeaea">ссылочный тип, расширение</td>
			</tr><tr>
				<td bgcolor="#eaeaea">простой тип, сужение</td>
				<td bgcolor="#eaeaea">ссылочный тип, сужение</td>
			</tr></table>
		<p >Что все это означает? Начнем по порядку. Для простых типов расширение означает, что осуществляется переход от менее емкого типа к более емкому. Например, от типа <span class="texample">byte</span> (длина 1 байт) к типу <span class="texample">int</span> (длина 4 байта). Такие преобразования безопасны в том смысле, что новый тип всегда гарантированно вмещает в себя все данные, которые хранились в старом типе, и таким образом не происходит потери данных. Именно поэтому компилятор осуществляет его сам, незаметно для разработчика:</p>
		<div  class="example"><pre>
byte b=3;
int a=b;</pre></div>
		<p >В последней строке значение переменной <span class="texample">b</span> типа <span class="texample">byte</span> будет преобразовано к типу переменной <span class="texample">a</span> (то есть, <span class="texample">int</span>) автоматически, никаких специальных действий для этого предпринимать не нужно.</p>
		<p >Следующие 19 преобразований являются расширяющими:</p>
		<ul >
			<li>от <span class="texample">byte</span> к <span class="texample">short</span>, <span class="texample">int</span>, <span class="texample">long</span>, <span class="texample">float</span>, <span class="texample">double</span></li>
			<li>от <span class="texample">short</span> к <span class="texample">int</span>, <span class="texample">long</span>, <span class="texample">float</span>, <span class="texample">double</span></li>
			<li>от <span class="texample">char</span> к <span class="texample">int</span>, <span class="texample">long</span>, <span class="texample">float</span>, <span class="texample">double</span></li>
			<li>от <span class="texample">int</span> к <span class="texample">long</span>, <span class="texample">float</span>, <span class="texample">double</span></li>
			<li>от <span class="texample">long</span> к <span class="texample">float</span>, <span class="texample">double</span></li>
			<li>от <span class="texample">float</span> к <span class="texample">double</span></li>
		</ul>
		<p >Обратите внимание, что нельзя провести преобразование к типу <span class="texample">char</span> от типов меньшей или равной длины (<span class="texample">byte</span>, <span class="texample">short</span>), или, наоборот, к <span class="texample">short</span> от <span class="texample">char</span> без потери данных. Это связано с тем, что <span class="texample">char</span>, в отличие от остальных целочисленных типов, является беззнаковым.</p>
		<p >Тем не менее, следует помнить, что даже при расширении данные все-таки могут быть в особых случаях искажены. Они уже рассматривались в предыдущей лекции, это приведение значений <span class="texample">int</span> к типу <span class="texample">float</span> и приведение значений типа <span class="texample">long</span> к типу <span class="texample">float</span> или <span class="texample">double</span>. Хотя эти дробные типы вмещают гораздо большие числа, чем соответствующие целые, но у них меньше значащих разрядов.</p>
		<p >Повторим этот пример:</p>
		<div  class="example"><pre>
long a=111111111111L;
float f = a;
a = (long) f;
print(a);</pre></div>
		<p >Результатом будет:</p>
		<div  class="example"><pre>
111111110656</pre></div>
		<p >Обратное преобразование - сужение - означает, что переход осуществляется от более емкого типа к менее емкому. При таком преобразовании есть риск потерять данные. Например, если число типа <span class="texample">int</span> было больше 127, то при приведении его к <span class="texample">byte</span> значения битов старше восьмого будут потеряны. В Java такое преобразование должно совершаться явным образом, т.е. программист в коде должен явно указать, что он намеревается осуществить такое преобразование и готов потерять данные.</p>
		<p >Следующие 23 преобразования являются сужающими:</p>
		<ul >
			<li>от <span class="texample">byte</span> к <span class="texample">char</span></li>
			<li>от <span class="texample">short</span> к <span class="texample">byte</span>, <span class="texample">char</span></li>
			<li>от <span class="texample">char</span> к <span class="texample">byte</span>, <span class="texample">short</span></li>
			<li>от <span class="texample">int</span> к <span class="texample">byte</span>, <span class="texample">short</span>, <span class="texample">char</span></li>
			<li>от <span class="texample">long</span> к <span class="texample">byte</span>, <span class="texample">short</span>, <span class="texample">char</span>, <span class="texample">int</span></li>
			<li>от <span class="texample">float</span> к <span class="texample">byte</span>, <span class="texample">short</span>, <span class="texample">char</span>, <span class="texample">int</span>, <span class="texample">long</span></li>
			<li>от <span class="texample">double</span> к <span class="texample">byte</span>, <span class="texample">short</span>, <span class="texample">char</span>, <span class="texample">int</span>, <span class="texample">long</span>, <span class="texample">float</span></li>
		</ul>
		<p >При сужении целочисленного типа к более узкому целочисленному все старшие биты, не попадающие в новый тип, просто отбрасываются. Не производится никакого округления или других действий для получения более корректного результата:</p>
		<div  class="example"><pre>
print((byte)383);
print((byte)384);
print((byte)-384);</pre></div>
		<p >Результатом будет:</p>
		<div  class="example"><pre>
127
-128
-128</pre></div>
		<p >Видно, что знаковый бит при сужении не оказал никакого влияния, так как был просто отброшен - результат приведения обратных чисел (384 и -384) оказался одинаковым. Следовательно, может быть потеряно не только точное абсолютное значение, но и знак величины.</p>
		<p >Это верно и для типа <span class="texample">char</span>:</p>
		<div  class="example"><pre>
char c=40000;
print((short)c);</pre></div>
		<p >Результатом будет:</p>
		<div  class="example"><pre>
-25536</pre></div>
		<p >Сужение дробного типа до целочисленного является более сложной процедурой. Она проводится в два этапа.</p>
		<p >На первом шаге дробное значение преобразуется в <span class="texample">long</span>, если целевым типом является <span class="texample">long</span>, или в <span class="texample">int</span> - в противном случае (целевой тип <span class="texample">byte</span>, <span class="texample">short</span>, <span class="texample">char</span> или <span class="texample">int</span>). Для этого исходное дробное число сначала математически округляется в сторону нуля, то есть дробная часть просто отбрасывается.</p>
		<p >Например, число <span class="texample">3,84</span> будет округлено до <span class="texample">3</span>, а <span class="texample">-3,84</span> превратится в <span class="texample">-3</span>. При этом могут возникнуть особые случаи:</p>
		<ul >
			<li>если исходное дробное значение является <span class="texample">NaN</span>, то результатом первого шага будет <span class="texample">0</span> выбранного типа (т.е. <span class="texample">int</span> или <span class="texample">long</span>);</li>
			<li>если исходное дробное значение является положительной или отрицательной бесконечностью, то результатом первого шага будет, соответственно, максимально или минимально возможное значение для выбранного типа (т.е. для <span class="texample">int</span> или <span class="texample">long</span>);</li>
			<li>наконец, если дробное значение было конечной величиной, но в результате округления получилось слишком большое по модулю число для выбранного типа (т.е. для <span class="texample">int</span> или <span class="texample">long</span>), то, как и в предыдущем пункте, результатом первого шага будет, соответственно, максимально или минимально возможное значение этого типа. Если же результат округления укладывается в диапазон значений выбранного типа, то он и будет результатом первого шага.</li>
		</ul>
		<p >На втором шаге производится дальнейшее сужение от выбранного целочисленного типа к целевому, если таковое требуется, то есть может иметь место дополнительное преобразование от <span class="texample">int</span> к <span class="texample">byte</span>, <span class="texample">short</span> или <span class="texample">char</span>.</p>
		<p >Проиллюстрируем описанный алгоритм преобразованием от бесконечности ко всем целочисленным типам:</p>
		<div  class="example"><pre>
float fmin = Float.NEGATIVE_INFINITY;
float fmax = Float.POSITIVE_INFINITY;
print("long: " + (long)fmin + ".." + 
      (long)fmax);

print("int: " + (int)fmin + ".." + 
      (int)fmax);

print("short: " + (short)fmin + ".." + 
      (short)fmax);

print("char: " + (int)(char)fmin + ".." + 
      (int)(char)fmax);

print("byte: " + (byte)fmin + ".." + 
      (byte)fmax);</pre></div>
		<p >Результатом будет:</p>
		<div  class="example"><pre>
long: -9223372036854775808..9223372036854775807
int: -2147483648..2147483647
short: 0..-1
char: 0..65535
byte: 0..-1</pre></div>
		<p >Значения <span class="texample">long</span> и <span class="texample">int</span> вполне очевидны - дробные бесконечности преобразовались в, соответственно, минимально и максимально возможные значения этих типов. Результат для следующих трех типов (<span class="texample">short</span>, <span class="texample">char</span>, <span class="texample">byte</span>) есть, по сути, дальнейшее сужение значений, полученных для <span class="texample">int</span>, согласно второму шагу процедуры преобразования. А делается это, как было описано, просто за счет отбрасывания старших битов. Вспомним, что минимально возможное значение в битовом виде представляется как <span class="texample">1000..000</span> (всего 32 бита для <span class="texample">int</span>, то есть единица и 31 ноль). Максимально возможное - <span class="texample">1111..111</span> (32 единицы). Отбрасывая старшие биты, получаем для отрицательной бесконечности результат <span class="texample">0</span>, одинаковый для всех трех типов. Для положительной же бесконечности получаем результат, все биты которого равняются <span class="texample">1</span>. Для знаковых типов <span class="texample">byte</span> и <span class="texample">short</span> такая комбинация рассматривается как -1, а для беззнакового <span class="texample">char </span> - как максимально возможное значение, то есть <span class="texample">65535</span>.</p>	
		<p >Может сложиться впечатление, что для <span class="texample">char</span> приведение дает точное значение. Однако это был частный случай - отбрасывание битов в большинстве случаев все же дает искажение. Например, сужение дробного значения 2 миллиарда:</p>
		<div  class="example"><pre>
float f=2e9f;
print((int)(char)f);
print((int)(char)-f);</pre></div>
		<p >Результатом будет:</p>
		<div  class="example"><pre>
37888
27648</pre></div>
		<p >Обратите внимание на двойное приведение для значений типа <span class="texample">char</span> в двух последних примерах. Понятно, что преобразование от <span class="texample">char</span> к <span class="texample">int</span> не приводит к потере точности, но позволяет распечатывать не символ, а его числовой код, что более удобно для анализа.</p>
		<p >В заключение еще раз обратим внимание на то, что примитивные значения типа <span class="texample">boolean</span> могут участвовать только в тождественных преобразованиях.</p>


    
	</td>		
	</tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2 align="center">

<a href="2.html" class="attention">Перейти к следующей странице &raquo;</b></a>

	</td></tr>
	<tr><td height="16" colspan=2><img src="../../../img/empty.gif" width="1" height="16"></td></tr>

<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/7/1.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr>

<td align=left><font class="rtitle">Страницы:</font>


<font class="rtitle">1</font>

<font class="stitle">|</font>


<a class="rtitle" href="2.html">2</a>
<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>


<a class="rtitle" href="4.html">4</a>
<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/7/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="2.html"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/7/javapl_7.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	</table>
	<!-- /content -->

</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- rightcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">
	<!---->


		<tr><td class="bordo" height="24">&nbsp;&nbsp;Информация о лекции</td></tr>
	<tr>
	<td>
<span class="rtxt">Эта лекция посвящена вопросам преобразования типов. Поскольку Java – язык строго типизированный, компилятор и виртуальная машина всегда следят за работой с типами, гарантируя надежность выполнения программы. Однако во многих случаях то или иное преобразование необходимо осуществить для реализации логики программы. С другой стороны, некоторые безопасные переходы между типами Java позволяет осуществлять неявным для разработчика образом, что может привести к неверному пониманию работы программы. <br>
В лекции рассматриваются все виды преобразований, а затем все ситуации в программе, где они могут применяться. В заключение приводится начало классификации типов переменных и типов значений, которые они могут хранить. Этот вопрос будет подробнее рассматриваться в следующих лекциях.

	</td>
	</tr>
	<tr><td>&nbsp;</td></tr>

	

	
	<td class="bordo" height="24">&nbsp;&nbsp;Учебники к курсу</td>
	</tr>
	<tr>
<td>

		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td>

<table border="0" cellpadding="1" cellspacing="0"  align="left" hspace="5" vspace="2"><tr><td class="orang"><table border="0" cellpadding="2" cellspacing="0" bgcolor="#ffffff"><tr><td valign="middle" align="center"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325"><img width="72" height="105" src="../../../img/covers/i/in/int/intu006.jpg" alt="Программирование на Java" border="0"></a></td></tr></table></td></tr></table>

<a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325" class="spectitle">
Программирование на Java</a>
<br>
<font class="spectxt">
Вязовик Н.А.,
<br>
Интернет-университет информационных технологий - ИНТУИТ.ру.
<br>
Курс лекций посвящен современному и мощному языку программирования Java. В его рамках дается вводное изложение принципов ООП, необходимое для разработки на Java, основы языка, библиотеки для работы с файлами, сетью, для построения оконного интерфейса пользователя (GUI) и др.

</font>
		</td>
		</tr>

		</table>

</td>
	</tr>


	<tr><td height="10"><img src="../../../img/empty.gif" width="1" height="10"></td></tr>



	<tr>
<td>
		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td class="spectxt">
<span class="spectitle"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=1412049" class="spectitle">Приемы объектно-ориентированного проектирования. Паттерны проектирования</a></span>
<br>
Гамма Э. и др.,
Питер.
		</td>
		</tr>


		</table>

</td>
	</tr>


<tr>
<td><a href="http://www.intuit.ru/cgi-bin/goto.fcgi?mode=books_of_course&cid=57" class="allnews">все книги по курсу &raquo;</a></td>
</tr>



	</table>
	<!-- /rightcolumn -->
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
</tr>
</table>

<!-- /bottom -->
<table border="0" cellpadding="0" cellspacing="6" width="100%" height="73">
<tr>
<td align="center" class="menu">
    <table border="0" cellpadding="0" cellspacing="0" background="">
    <tr>
    <td class="copy">
    <a href="http://www.intuit.ru/all_departments.html" class="bot">Кафедры</a> |
    <a href="http://www.intuit.ru/all_courses.html" class="bot">Все курсы</a> |
    <a href="http://www.intuit.ru/syllabus.html" class="bot">Расписание</a> |
    <a href="http://www.intuit.ru/shop/catalog/index.html?" class="bot">Учебники</a> | 
    <a href="http://www.intuit.ru/news.html" class="bot">Новости</a> | 
    <a href="http://www.intuit.ru/department/forum/" class="bot">Форум</a>
    <br>
    <a href="http://www.intuit.ru/user/classes/" class="bot">Мои курсы</a> | 
    <a href="http://www.intuit.ru/user/adjustments/" class="bot">Личные настройки</a> | 
    <a href="http://www.intuit.ru/user/cart/" class="bot">Корзина</a> | 
    <a href="http://www.intuit.ru/help/" class="bot">Помощь</a><br><br>
    Телефон: (095) 253-9312, 253-9313, факс: (095) 253-9310, email: <a href="http://www.intuit.ru/help/askform.xhtml" class="bot">info@intuit.ru</a><br>
    Адрес: 123056 Москва, Электрический пер., 8, стр. 3<br>
    &copy; 2003-2004 INTUIT.ru. Все права защищены.
    </td>
    </tr>
    </table>
</td>
</tr>
</table>
<!-- /bottom -->


</body>
</html>
