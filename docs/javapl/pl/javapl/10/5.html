<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<title>INTUIT.ru::Интернет-Университет Информационных Технологий</title>
<link rel="shortcut icon" href="http://www.intuit.ru/favicon.ico">


<META http-equiv="Pragma" CONTENT="no-cache">
<META http-equiv="Cache-Control" CONTENT="no-cache, must-revalidate">
<META NAME="Pragma" CONTENT="no-cache">
<META NAME="Cache-Control" CONTENT="no-cache">
<link href="../../../ssi/style.css" type="text/css" rel="stylesheet">
</head>
<body leftmargin="0" topmargin="6" marginheight="6" marginwidth="0" bgcolor="white">

<!-- header -->
<!---->
<table border="0" cellpadding="8" cellspacing="0" width="100%">
<tr valign="top">
<td><a href="http://www.intuit.ru/"><img src="../../../img/logo.gif" border="0" width="285" height="52" alt="Интернет Университет информационных технологий"></a></td>
<!---->
</tr>
</table>

<!-- /header -->

<!-- /menu -->
<table border="0" cellpadding="" cellspacing="6" width="100%">
<tr>
<td align="center" class="menu">
	<table border="0" cellpadding="0" cellspacing="0" background="" height="31">
	<tr>
	<td><a href="http://www.intuit.ru/speciality/" class="menu">Учебные программы</a></td>
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_departments.html" class="menu">Кафедры</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/all_courses.html" class="menu">Все курсы</a></td>	
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/syllabus.html" class="menu">Расписание</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/shop/" class="menu">Учебники</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/news.html" class="menu">Новости</a></td>		
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/department/forum/" class="menu">Форум</a></td>
<!--
	<td><img src="../../../img/separator.gif" width="2" height="18" border="0" hspace="7"></td>
	<td><a href="http://www.intuit.ru/help/" class="menu">Помощь</a></td>		
-->
	</tr>
	</table>	

</td>
</tr>
</table>
<!-- /menu -->


<table border="0" cellpadding="0" cellspacing="0" width="100%" height="73">
<tr valign="top">
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- leftcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">

		<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Лекции</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>

		<td colspan=3>
<a href="../index.html" class="spec">Программирование на Java</a>


</td>
		</tr>
<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">1.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../1/1.html" class="llecture">Что такое Java? История создания</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">2.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../2/1.html" class="llecture">Основы объектно-ориентированного...</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">3.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../3/1.html" class="llecture">Лексика языка</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">4.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../4/1.html" class="llecture">Типы данных</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">5.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../5/1.html" class="llecture">Имена. Пакеты</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">6.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../6/1.html" class="llecture">Объявление классов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">7.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../7/1.html" class="llecture">Преобразование типов</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">8.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../8/1.html" class="llecture">Объектная модель в Java</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">9.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../9/1.html" class="llecture">Массивы</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">10.</td>
		<td>&nbsp;</td>
<td class="llecture">


<a href="../10/1.html" class="llecture_selected">Операторы и структура кода. Исключения</a>


</td>
		</tr>




		<tr valign=top>

		<td class="llecture">11.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../11/1.html" class="llecture">Пакет java.awt</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">12.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../12/1.html" class="llecture">Потоки выполнения. Синхронизация</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">13.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../13/1.html" class="llecture">Пакет java.lang</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">14.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../14/1.html" class="llecture">Пакет java.util</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">15.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../15/1.html" class="llecture">Пакет java.io</a>
</td>
		</tr>




		<tr valign=top>

		<td class="llecture">16.</td>
		<td>&nbsp;</td>
<td class="llecture">

<a href="../16/1.html" class="llecture">Введение в сетевые протоколы</a>
</td>
		</tr>






<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="http://www.intuit.ru/department/pl/javapl/class/examination/" class="llecture">Экзамен</a></td>
		</tr>
		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a class="llecture_red" href="http://www.intuit.ru/department/pl/javapl/class/examination_extern/">Сдать экзамен экстерном</a></td>
		</tr>

<tr valign=top><td colspan="3" height="6"><img src="../../../img/empty.gif" width="1" height="6"></td></tr>

		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../lit.html" class="llecture">Литература</a></td>
		</tr>





		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../keywords.html" class="llecture">Предметный указатель</a></td>
		</tr>



		<tr valign=top>

		<td class="llecture">&nbsp;</td>
<td>&nbsp;</td>

		<td class="llecture"><a href="../examples.html" class="llecture">Примеры</a></td>
		</tr>


		</table><br>
	</td>
	</tr>


	

	<tr valign="middle">
	<td class="orang" height="24">&nbsp;&nbsp;Общение</td>
	</tr>
	<tr>
	<td>
		<table border="0" cellpadding="0" cellspacing="0">

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/classmates/" class="spec">однокурсники</a></td>
		</tr>
		

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/forum/" class="spec">форум по курсу</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/question_for_lector/" class="spec">вопрос преподавателю</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/opinions/" class="spec">мнения о курсе</a></td>
		</tr>

		<tr valign=top>
		<td><img src="../../../img/arrow.gif" border="0" width="6" height="7" hspace="5" vspace="5"></td>
		<td><a href="http://www.intuit.ru/department/pl/javapl/class/rating/" class="spec">рейтинг выпускников</a></td>
		</tr>


		</table><br>
	</td>
	</tr>



<tr><td height="1"><a href="../robot.html"><img src="../../../img/empty.gif" width="1" height="1" border="0"></a></td></tr>

	</table>

	<!-- #include virtual="~/inc/leftcolumn.html" -->
	<!-- /leftcolumn -->	
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td>
	<!-- content -->
	<table border="0" cellpadding="0" cellspacing="0" width="100%">
	<tr><td class="head" colspan=2>Программирование на Java</td></tr>
<tr><td colspan=2 height="4"><img src="../../../img/empty.gif" width="1" height="4"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>




<tr>
<td colspan="2" align=left class="headsub">Лекция #10: <a href="../10/1.html">Операторы и структура кода. Исключения</a></td>
</tr>

<tr><td height="6" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>


<tr>

<td align=left><font class="rtitle">Страницы:</font>
<a class="rtitle" href="4.html">&laquo;</a> <font class="stitle">|</font>


<a class="rtitle" href="1.html">1</a>
<font class="stitle">|</font>


<a class="rtitle" href="2.html">2</a>
<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>


<a class="rtitle" href="4.html">4</a>
<font class="stitle">|</font>

<font class="rtitle">5</font>

<font class="stitle">|</font>


<a class="rtitle" href="6.html">6</a>
<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/10/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="6.html"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/10/javapl_10.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>


	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/10/5.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2>


    
    <h3 >Ошибки при работе программы. Исключения (Exceptions)</h3>
        
        <p >
При выполнении программы могут возникать ошибки. В одних случаях это вызвано ошибками программиста, в других - внешними причинами. Например, может возникнуть ошибка ввода/вывода при работе с файлом или сетевым соединением. В классических языках программирования, например, в С, требовалось проверять некое условие, которое указывало на наличие ошибки, и в зависимости от этого предпринимать  те или иные  действия. 
</p>
        <p >
Например: 
</p>
        <div  class="example"><pre> 
:
int statusCode = someAction();
if (statusCode){
   : обработка ошибки
} else {
   statusCode = anotherAction();
   if(statusCode) {
      : обработка ошибки :
   }
}
: 
</pre></div>
        <p >
В Java появилось более простое  и элегантное решение - обработка исключительных ситуаций. 
</p>
        <div  class="example"><pre> 
try{
   someAction();
   anotherAction()
} catch(Exception e) {
   : обработка исключительной ситуации
} 
</pre></div>
        <p >
Легко заметить, что такой подход является не только  изящным, но и более надежным и простым для понимания. 
</p>
        <h4 >Причины возникновения ошибок </h4>
            
            <p >
Существует три причины возникновения исключительных ситуаций. 
</p>
            <ul >
                <li>Попытка выполнить некорректное выражение.
	Например, деление на ноль, или обращение к объекту по ссылке, равной <span class="texample">null</span>, попытка использовать класс, описание которого (<span class="texample">class</span>-файл) отсутствует, и т.д.
	В таких случаях всегда можно точно указать, в каком месте произошла ошибка, - именно в некорректном выражении. </li>
                <li>Выполнение оператора <span class="texample">throw</span>
 	Этот оператор применяется для явного порождения ошибки. Очевидно, что и здесь можно указать место возникновения исключительной ситуации. </li>
                <li>Асинхронные ошибки во время исполнения программы. </li>
            </ul>
            <p >
Причиной таких ошибок могут быть сбои внутри самой виртуальной машины (ведь она также является рограммой), или вызов метода <span class="texample">stop()</span> у потока выполнения <span class="texample">Thread</span>. 
</p>
            <p >
В этом случае невозможно указать точное место программы, где происходит исключительная ситуация. Если мы попытаемся остановить поток выполнения (вызвав метод <span class="texample">stop()</span>),  нам не удастся предсказать, при выполнении какого именно выражения этот поток остановится. 
</p>
            <p >
Таким образом, все ошибки в Java делятся на синхронные и асинхронные. С первыми сравнительно проще работать, так как принципиально возможно найти точное место в коде, которое является причиной возникновения исключительной ситуации. Конечно, Java является строгим языком в том смысле, что все выражения до точки сбоя обязательно будут выполнены, и в то же время ни одно последующее выражение никогда выполнено не будет. Важно помнить, что ошибки могут возникать как по причине недостаточной внимательности программиста (отсутствует нужный класс, или индекс массива вышел за допустимые границы), так и по независящим от него причинам (произошел разрыв сетевого соединения, сбой аппаратного обеспечения, например, жесткого диска и др.). 
</p>
            <p >
Асинхронные ошибки гораздо сложнее в обнаружении и исправлении. Обычному разработчику очень  трудно выявить причины сбоев в виртуальной машине. Это могут быть ошибки создателей JVM, несовместимость с операционной системой, аппаратный сбой и многое другое. Все же современные виртуальные машины реализованы довольно хорошо и подобные сбои происходят крайне редко (при условии использования качественных комплектующих). 
</p>
            <p >
Аналогичная ситуация наблюдается и в случае с принудительной остановкой потоков исполнения. Поскольку это действие выполняется операционной системой, никогда нельзя предсказать, в каком именно месте остановится поток. Это означает, что программа может многократно отработать корректно, а потом неожиданно дать сбой просто из-за того, что поток остановился в каком-то другом месте. По этой причине принудительная остановка не рекомендуется. В лекции 12 рассматриваются примеры корректного управления жизненным циклом потока. 
</p>
            <p >
При возникновении исключительной ситуации управление передается от кода, вызвавшего исключительную ситуацию, на ближайший блок <span class="texample">catch</span> (или вверх по стеку) и создается объект, унаследованный от класса <span class="texample">Throwable</span>, или его потомков (см. диаграмму иерархии классов-исключений), который содержит информацию об исключительной ситуации и используется при ее обработке. Собственно, в блоке <span class="texample">catch</span> указывается именно класс обрабатываемой ситуации. Подробно обработка ошибок рассматривается ниже. 
</p>
            <p >
Иерархия, по которой передается информация об исключительной ситуации, зависит от того, где эта исключительная ситуация возникла. Если это 
</p>
            <ul >
                <li>метод, то управление будет передаваться в то место, где  данный метод был вызван;</li>
                <li>конструктор, то управление будет передаваться туда, где попытались создать объект (как правило, применяя оператор <span class="texample">new</span>); </li>
                <li>статический инициализатор, то управление будет передано туда, где произошло первое обращение к классу, потребовавшее его инициализации. </li>
            </ul>
            <p >
Допускается создание собственных классов исключительных ситуаций. Осуществляется это с помощью механизма наследования, то есть класс пользовательской исключительной ситуации должен быть унаследован от класса <span class="texample">Throwable</span>, или его потомков. 
</p>
        
        <h4 >Обработка исключительных ситуаций </h4>
            
            <h5 >Конструкция try-catch </h5>
                
                <p >
В общем случае конструкция выглядит так: 
</p>
                <div  class="example"><pre> 
try {
   :
} catch(SomeExceptionClass e) {
   :
} catch(AnotherExceptionClass e) {
   :
} 
</pre></div>
                <p >
Работает она следующим образом. Сначала выполняется код, заключенный в фигурные скобки оператора <span class="texample">try</span>. Если во время его выполнения не происходит никаких нештатных ситуаций, то далее управление передается за закрывающую фигурную скобку последнего оператора <span class="texample">catch</span>, ассоциированного с данным оператором <span class="texample">try</span>. 
</p>
                <p >
Если в пределах <span class="texample">try</span> возникает исключительная ситуация, то далее выполнение кода производится по одному из перечисленных ниже сценариев. 
</p>
                <p >
Возникла исключительная ситуация, класс которой указан в качестве параметра одного из блоков <span class="texample">catch</span>. В этом случае производится выполнение блока кода, ассоциированного с данным <span class="texample">catch</span> (заключенного в фигурные скобки). Далее, если код в этом блоке завершается нормально, то и весть оператор <span class="texample">try</span> завершается нормально и управление передается на оператор (выражение), следующий за закрывающей фигурной скобкой последнего <span class="texample">catch</span>. Если код в <span class="texample">catch</span> завершается не штатно, то и весь <span class="texample">try</span> завершается нештатно по той же причине. 
</p>
                <p >
Если возникла исключительная ситуация, класс которой не указан в качестве аргумента ни в одном <span class="texample">catch</span>, то выполнение всего <span class="texample">try</span> завершается нештатно. 
</p>
            
            <h5 >Конструкция try-catch-finally </h5>
                
                <p >
Оператор <span class="texample">finally</span> предназначен для того, чтобы обеспечить гарантированное выполнение какого-либо фрагмента кода. Вне зависимости от того, возникла ли исключительная ситуация в блоке <span class="texample">try</span>, задан ли подходящий блок <span class="texample">catch</span>, не возникла ли ошибка в самом блоке <span class="texample">catch</span>,- все равно блок  <span class="texample">finally</span> будет в конце концов исполнен.
</p>
                <p >
Последовательность выполнения такой конструкции следующая: если оператор <span class="texample">try</span> выполнен нормально, то будет выполнен блок <span class="texample">finally</span>. В свою очередь, если оператор <span class="texample">finally</span> выполняется нормально, то и весь оператор <span class="texample">try</span> выполняется нормально. 
</p>
                <p >
Если во время выполнения блока <span class="texample">try</span> возникает исключение и существует оператор <span class="texample">catch</span>, который перехватывает данный тип исключения, происходит выполнение связанного с <span class="texample">catch</span> блока. Если блок <span class="texample">catch</span> выполняется нормально, либо ненормально, все равно затем выполняется блок <span class="texample">finally</span>. Если блок <span class="texample">finally</span> завершается нормально, то оператор <span class="texample">try</span> завершается так же, как завершился блок <span class="texample">catch</span>. 
</p>
                <p >
Если в списке операторов <span class="texample">catch</span> не находится такого, который обработал бы возникшее исключение, то все равно выполняется блок <span class="texample">finally</span>. В этом случае, если <span class="texample">finally</span> завершится нормально, весь <span class="texample">try</span> завершится ненормально по той же причине, по которой было нарушено исполнение <span class="texample">try</span>. 
</p>
                <p >
Во всех случаях, если блок <span class="texample">finally</span> завершается ненормально, то весь <span class="texample">try</span> завершится ненормально по той же причине. 
</p>
                <p >
Рассмотрим пример применения конструкции <span class="texample">try-catch-finally</span>.
</p>
                <div  class="example"><pre> 
try {
   byte [] buffer = new byte[128];
   FileInputStream fis = 
      new FileInputStream("file.txt");
   while(fis.read(buffer) &gt; 0) {
      : обработка данных
   }
} catch(IOException es) {
      : обработка исключения :
} finally {
   fis.flush();
   fis.close();
} 
</pre></div>
                <p >
Если в данном примере поместить операторы очистки буфера и закрытия файла сразу после окончания обработки данных, то при возникновении ошибки ввода/вывода корректного закрытия файла не произойдет. Еще раз отметим, что блок <span class="texample">finally</span> будет выполнен в любом случае, вне зависимости от того, произошла обработка исключения или нет, возникло это исключение или нет. 
</p>
                <p >
В конструкции <span class="texample">try-catch-finally</span> обязательным является использование одной из частей оператора <span class="texample">catch</span> или <span class="texample">finally</span>. То есть конструкция </p>
                <div  class="example"><pre> 
try {
   ...
} finally {
   ...
} 
</pre></div>
                <p >
является вполне допустимой. В этом случае блок <span class="texample">finally</span> при возникновении исключительной ситуации  должен быть выполнен, хотя сама исключительная ситуация обработана не будет и будет передана для обработки на более высокий уровень иерархии. 
</p>
                <p >
Если обработка исключительной ситуации в коде не предусмотрена, то при ее возникновении выполнение метода будет прекращено и исключительная ситуация будет передана для обработки коду более высокого уровня. Таким образом, если исключительная ситуация произойдет в вызываемом методе, то управление будет передано вызывающему методу и обработку исключительной ситуации должен произвести он. Если исключительная ситуация возникла в коде самого высокого уровня (например, методе <span class="texample">main()</span>), то управление будет передано исполняющей системе Java и выполнение программы будет прекращено (более точно - будет остановлен поток исполнения, в котором произошла такая ошибка). 
</p>
            
        
        <h4 >Использование оператора throw</h4>
            
            <p >
Помимо того, что предопределенная исключительная ситуация может быть возбуждена исполняющей системой Java, программист сам может явно породить ошибку. Делается это с помощью оператора <span class="texample">throw</span>. 
</p>
            <p >
Например: 
</p>
            <div  class="example"><pre> 
....
public int  calculate(int theValue) {
   if( theValue &lt; 0) {
   throw new Exception(
     "Параметр для вычисления не должен 
      быть отрицательным");
   }
}
: 
</pre></div>
            <p >
В данном случае предполагается, что в качестве параметра методу может быть передано только положительное значение; если это условие не выполнено, то с помощью оператора <span class="texample">throw</span> порождается  исключительная ситуация. (Для успешной компиляции также требуется в заголовке метода указать <span class="texample">throws Exception</span> - это выражение рассматривается ниже.) 
</p>
            <p >
Метод должен делегировать обработку исключительной ситуации вызвавшему его коду. Для этого в сигнатуре метода применяется ключевое слово <span class="texample">throws</span>, после которого должны быть перечислены через запятую все исключительные ситуации, которые может вызывать данный метод. То есть приведенный выше пример должен быть приведен к следующему виду: 
</p>
            <div  class="example"><pre> 
....
public int  calculate(int theValue) 
  throws Exception {
    if( theValue &lt; 0) {
      throw new Exception(
       "Some descriptive info");
   }
}
: 
</pre></div>
            <p >
Таким образом,  создание исключительной ситуации в программе  выполняется с помощью оператора <span class="texample">throw</span> с аргументом, значение которого может быть приведено к типу <span class="texample">Throwable</span>.
</p>
            <p >
В некоторых случаях после обработки исключительной ситуации  может возникнуть необходимость передать информацию о ней в вызывающий код. 
</p>
            <p >
В этом случае ошибка появляется вторично. 
</p>
            <p >
Например: 
</p>
            <div  class="example"><pre> 
:
try {
   :
} catch(IOException ex) {
   :
   // Обработка исключительной ситуации
   :
   // Повторное возбуждение исключительной 
   // ситуации
   throw ex;
}
</pre></div>
            <p >
Рассмотрим еще один случай. 
</p>
            <p >
Предположим, что оператор <span class="texample">throw</span> применяется внутри конструкции <span class="texample">try-catch</span>. 
</p>
            <div  class="example"><pre> 
try {
   :
   throw new IOException();
   :
} catch(Exception e) {
   :
} 
</pre></div>
            <p >
В этом случае исключение, возбужденное в блоке <span class="texample">try</span>, не будет передано для обработки на более высокий уровень иерархии, а обработается в пределах блока <span class="texample">try-catch</span>, так как здесь содержится оператор, который может это исключение перехватить. То есть произойдет неявная передача управления на соответствующий блок <span class="texample">cacth</span>.
</p>
        
        <h4 >Проверяемые и непроверяемые исключения </h4>
            
            <p >
Все исключительные ситуации можно разделить на две категории: <span class="keyword">проверяемые</span> (checked) и <span class="keyword">непроверяемые</span> (unchecked). 
</p>
            <p >
Все исключения, порождаемые от <span class="texample">Throwable</span>, можно разбить на три группы. Они определяются тремя базовыми типами: наследниками <span class="texample">Throwable</span> - классами <span class="texample">Error</span> и <span class="texample">Exception</span>, а также наследником <span class="texample">Exception - RuntimeException</span>.
</p>
            <p >
Ошибки, порожденные от <span class="texample">Exception</span> (и не являющиеся наследниками <span class="texample">RuntimeException</span>), являются <span class="keyword">проверяемыми</span>. Т.е. во время компиляции проверяется, предусмотрена ли обработка возможных исключительных ситуаций. Как правило, это ошибки, связанные с окружением программы (сетевым, файловым вводом-выводом и др.), которые могут возникнуть вне зависимости от того, корректно написан код или нет. Например, открытие сетевого соединения или файла может привести к возникновению ошибки и компилятор требует от программиста предусмотреть некие действия для обработки возможных проблем. Таким образом повышается надежность программы, ее устойчивость при возможных сбоях.
</p>
            <p >
Исключения, порожденные от <span class="texample">RuntimeException</span>, являются <span class="keyword">непроверяемыми</span> и компилятор не требует обязательной их обработки. 
</p>
            <p >
Как правило, это ошибки программы, которые при правильном кодировании возникать не должны (например, <span class="texample">IndexOfBoundException</span> - выход за границы массива, <span class="texample">java.lang.ArifmeticException</span> - деление на ноль). Поэтому, чтобы не загромождать программу, компилятор оставляет на усмотрение программиста обработку таких исключений с помощью блоков <span class="texample">try-catch</span>. 
</p>
            <p >
Исключения, порожденные от <span class="texample">Error</span>, также не являются <span class="keyword">проверяемыми</span>. Они предназначены для того, чтобы уведомить приложение о возникновении фатальной ситуации, которую программным способом устранить практически невозможно (хотя формально обработчик допускается). Они могут свидетельствовать об ошибках программы, но, как правило, это неустранимые проблемы на уровне JVM. В качестве примера можно привести <span class="texample">StackOverflowError</span> (переполнение стека), <span class="texample">OutOfMemoryError</span> (нехватка памяти). 
</p>
            <p >
Если в конструкции обработки исключений используется несколько операторов <span class="texample">catch</span>, классы исключений нужно перечислять в них последовательно, от менее общих к более общим. Рассмотрим два примера: 
</p>
            <div  class="example"><pre> 
try {
   :
}
catch(Exception e) {
   :
}
catch(IOException ioe) {
   :
}
catch(UserExcetion ue) {
   :
} 
</pre></div>
            <p >
                <p align="center"><a name="image.10.1"></a><img src="10-1.gif" alt="Иерархия классов стандартных исключений." width="670" height="603"><br><b>Рис. 
            10.1.
            </b> Иерархия классов стандартных исключений.</p> 
            </p>
            <p >
В данном примере при возникновении исключительной ситуации (класс, порожденный от <span class="texample">Exception</span>) будет выполняться всегда только первый блок <span class="texample">catch</span>. Остальные не будут выполнены ни при каких условиях. Эта ситуация отслеживается компилятором, который сообщает об <span class="texample">UnreachableCodeException</span> (ошибка - недостижимый код). Правильно данная конструкция будет выглядеть так: 
</p>
            <div  class="example"><pre> 
try {
   :
}
catch(UserExcetion ue) {
   :
}
catch(IOException ioe) {
   :
}
catch(Exception e) {
   :
} 
</pre></div>
            <p >
В этом случае будет  выполняться последовательная обработка исключений. И в случае, если не предусмотрена обработка того типа исключения, которое возникло (например, <span class="texample">AnotherUserException</span>), будет выполнен блок <span class="texample">catch(Exception e){:}</span>
            </p>
            <p >
Если срабатывает один из блоков <span class="texample">catch</span>, то остальные блоки в данной конструкции <span class="texample">try-catch</span> выполняться не будут. 
</p>
        
        <h4 >Создание пользовательских классов исключений</h4>
            
            <p >
Как уже отмечалось, допускается создание собственных классов исключений. Для этого достаточно создать свой класс, унаследовав его от любого наследника <span class="texample">java.lang.Throwable</span> (или от самого <span class="texample">Throwable</span>). 
</p>
            <p >
Пример: 
</p>
            <div  class="example"><pre> 
public class UserException extends Exception {
   public UserException() {
      super();
   }
   public UserException(String descry) {
      super(descr);
   }
} 
</pre></div>
            <p >
Соответственно, данное исключение будет создаваться следующим образом: 
</p>
            <div  class="example"><pre>  
throw new UserException(
   "Дополнительное описание"); 
</pre></div>
        
        <h4 >Переопределение методов и исключения</h4>
            
            <p >
При переопределении методов следует помнить, что если переопределяемый метод объявляет список возможных исключений, то переопределяющий метод не может расширять этот список, но может его сужать. Рассмотрим пример: 
</p>
            <div  class="example"><pre> 
public class BaseClass{
   public void method () throws IOException {
   ...
   }
}

public class LegalOne extends BaseClass {
   public void method () throws IOException {
      ...
   }
}

public class LegalTwo extends BaseClass {
   public void method () {
      ...
   }
}

public class LegalTree extends BaseClass {
   public void method () 
      throws 
        EOFException,MalformedURLException {
      ...
   }
}

public class IllegalOne extends BaseClass {
   public void method () 
      throws 
        IOException,IllegalAccessException {
      ...
   }
}

public class IllegalTwo extends BaseClass {
   public void method () {
      ...
      throw new Exception();
   }
} 
</pre></div>
            <p >
В данном случае:
</p>
            <ul >
                <li>определение класса <span class="texample">LegalOne</span> будет корректным, так как  переопределение метода <span class="texample">method()</span> верное (список ошибок не изменился); </li>
                <li>определение класса <span class="texample">LegalTwo</span> будет корректным, так как переопределение метода <span class="texample">method()</span> верное (новый метод не может выбрасывать ошибок, а значит, не расширяет список возможных ошибок старого метода); </li>
                <li>определение класса <span class="texample">LegalTree</span> будет корректным, так как  переопределение метода <span class="texample">method()</span> будет верным (новый метод может  создавать исключения, которые являются подклассами исключения, возбуждаемого в старом методе, то есть список сузился);</li>
                <li>определение класса <span class="texample">IlegalOne</span> будет некорректным, так как  переопределение метода <span class="texample">method()</span> неверно (<span class="texample">IllegalAccessException</span> не является подклассом <span class="texample">IOException</span>, список расширился); </li>
                <li>определение класса <span class="texample">IlegalTwo</span> будет некорректным: хотя заголовок <span class="texample">method()</span> объявлен верно (список не расширился), в теле метода бросается исключение, не указанное в <span class="texample">throws</span>. </li>
            </ul>
        
        <h4 >Особые случаи </h4>
            
            <p >
Во время исполнения кода могут возникать ситуации, которые  почти  не описаны в литературе. 
</p>
            <p >
Рассмотрим такую ситуацию: 
</p>
            <div  class="example"></div>  
            <p >
Результат работы будет выглядеть следующим образом: 
</p>
            <div  class="example"></div>  
            <p >
Так как при вторичном возбуждении используется один и тот же объект <span class="texample">Exception</span>, стек в обоих случаях будет содержать одну и ту же последовательность вызовов. То есть при повторном возбуждении исключения, если мы используем тот же объект, изменения его параметров не происходит. 
</p>
            <p >
Рассмотрим другой пример:
</p>
            <div  class="example"></div> 
            <p >
Несложно заметить, что, хотя последовательность вызовов одна и та же, в вызываемом и вызывающем методах обрабатываются разные объекты исключений. 
</p>
        


    
	</td>		
	</tr>
	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td colspan=2 align="center">

<a href="6.html" class="attention">Перейти к следующей странице &raquo;</b></a>

	</td></tr>
	<tr><td height="16" colspan=2><img src="../../../img/empty.gif" width="1" height="16"></td></tr>

<tr><td align="center" class="orang_light" colspan="2">
&nbsp;
<font class="rtxt">Если Вы заметили ошибку на этой странице - <a class="llecture_red" target="_blank" href="http://www.intuit.ru/help/askform.xhtml?course=57&url=http://www.intuit.ru/department/pl/javapl/10/5.html">сообщите нам.</a></font>
&nbsp;
</td></tr>

	<tr><td height="2" colspan=2><img src="../../../img/empty.gif" width="1" height="2"></td></tr>
<tr>

<td align=left><font class="rtitle">Страницы:</font>
<a class="rtitle" href="4.html">&laquo;</a> <font class="stitle">|</font>


<a class="rtitle" href="1.html">1</a>
<font class="stitle">|</font>


<a class="rtitle" href="2.html">2</a>
<font class="stitle">|</font>


<a class="rtitle" href="3.html">3</a>
<font class="stitle">|</font>


<a class="rtitle" href="4.html">4</a>
<font class="stitle">|</font>

<font class="rtitle">5</font>

<font class="stitle">|</font>


<a class="rtitle" href="6.html">6</a>
<font class="stitle">|</font>


<a class="rtitle" href="http://www.intuit.ru/department/pl/javapl/10/test/">вопросы</a> <font class="stitle">|</font> 
<a class="rtitle" href="6.html"><b>&raquo;</b></a>
</td>
<td align=right><font class="stitle">|</font>
<a href="http://www.intuit.ru/department/pl/javapl/10/javapl_10.html" class="rtitle" target="_blank">HTML для печати</a>




</td>

</tr>

	<tr><td height="8" colspan=2><img src="../../../img/empty.gif" width="1" height="8"></td></tr>
	<tr><td class="orang" height="1" colspan=2><img src="../../../img/empty.gif" width="1" height="1"></td></tr>
	</table>
	<!-- /content -->

</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="1" class="gray"><img src="../../../img/empty.gif"></td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
<td width="180">
	<!-- rightcolumn -->
	<table border="0" cellpadding="2" cellspacing="0" background="" width="100%">
	<!---->


<!--Основные понятия-->
	<td class="bordo" height="24">&nbsp;&nbsp;Ключевые слова</td>
	</tr>
	<tr>
	<td><span class="rtxt"><span  class="keyword_list">непроверяемое исключение</span>, <span  class="keyword_list">проверяемое исключение</span><br ><br ><a  class="allnews" href="../keywords.html">все ключевые слова »</a>
</td>
	</tr>
	<tr><td>&nbsp;</td></tr>
<!--/Основные понятия-->

		<tr><td class="bordo" height="24">&nbsp;&nbsp;Информация о лекции</td></tr>
	<tr>
	<td>
<span class="rtxt">После ознакомления с типами данных в Java, правилами объявления классов и интерфейсов, а также с массивами, из базовых свойств языка остается рассмотреть лишь управление ходом выполнения программы. В этой лекции вводятся важные понятия, связанные с  данной темой, описываются метки, операторы условного перехода, циклы, операторы break и continue и другие.<br>
Следующая тема посвящена более концептуальным механизмам Java, а именно работе с ошибками или исключительными ситуациями. Рассматриваются причины возникновения сбоев, способы их обработки, объявление собственных типов исключительных ситуаций. Описывается разделение всех ошибок на проверяемые и непроверяемые компилятором, а также ошибки времени исполнения.

	</td>
	</tr>
	<tr><td>&nbsp;</td></tr>

	

	
	<td class="bordo" height="24">&nbsp;&nbsp;Учебники к курсу</td>
	</tr>
	<tr>
<td>

		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td>

<table border="0" cellpadding="1" cellspacing="0"  align="left" hspace="5" vspace="2"><tr><td class="orang"><table border="0" cellpadding="2" cellspacing="0" bgcolor="#ffffff"><tr><td valign="middle" align="center"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325"><img width="72" height="105" src="../../../img/covers/i/in/int/intu006.jpg" alt="Программирование на Java" border="0"></a></td></tr></table></td></tr></table>

<a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=2459325" class="spectitle">
Программирование на Java</a>
<br>
<font class="spectxt">
Вязовик Н.А.,
<br>
Интернет-университет информационных технологий - ИНТУИТ.ру.
<br>
Курс лекций посвящен современному и мощному языку программирования Java. В его рамках дается вводное изложение принципов ООП, необходимое для разработки на Java, основы языка, библиотеки для работы с файлами, сетью, для построения оконного интерфейса пользователя (GUI) и др.

</font>
		</td>
		</tr>

		</table>

</td>
	</tr>


	<tr><td height="10"><img src="../../../img/empty.gif" width="1" height="10"></td></tr>



	<tr>
<td>
		<table border="0" cellpadding="0" cellspacing="0">


		<tr valign="top">
		<td class="spectxt">
<span class="spectitle"><a href="http://www.intuit.ru/shop/catalog/product.xhtml?id=1412049" class="spectitle">Приемы объектно-ориентированного проектирования. Паттерны проектирования</a></span>
<br>
Гамма Э. и др.,
Питер.
		</td>
		</tr>


		</table>

</td>
	</tr>


<tr>
<td><a href="http://www.intuit.ru/cgi-bin/goto.fcgi?mode=books_of_course&cid=57" class="allnews">все книги по курсу &raquo;</a></td>
</tr>



	</table>
	<!-- /rightcolumn -->
</td>
<td width="6"><img src="../../../img/empty.gif" width="6"></td>
</tr>
</table>

<!-- /bottom -->
<table border="0" cellpadding="0" cellspacing="6" width="100%" height="73">
<tr>
<td align="center" class="menu">
    <table border="0" cellpadding="0" cellspacing="0" background="">
    <tr>
    <td class="copy">
    <a href="http://www.intuit.ru/all_departments.html" class="bot">Кафедры</a> |
    <a href="http://www.intuit.ru/all_courses.html" class="bot">Все курсы</a> |
    <a href="http://www.intuit.ru/syllabus.html" class="bot">Расписание</a> |
    <a href="http://www.intuit.ru/shop/catalog/index.html?" class="bot">Учебники</a> | 
    <a href="http://www.intuit.ru/news.html" class="bot">Новости</a> | 
    <a href="http://www.intuit.ru/department/forum/" class="bot">Форум</a>
    <br>
    <a href="http://www.intuit.ru/user/classes/" class="bot">Мои курсы</a> | 
    <a href="http://www.intuit.ru/user/adjustments/" class="bot">Личные настройки</a> | 
    <a href="http://www.intuit.ru/user/cart/" class="bot">Корзина</a> | 
    <a href="http://www.intuit.ru/help/" class="bot">Помощь</a><br><br>
    Телефон: (095) 253-9312, 253-9313, факс: (095) 253-9310, email: <a href="http://www.intuit.ru/help/askform.xhtml" class="bot">info@intuit.ru</a><br>
    Адрес: 123056 Москва, Электрический пер., 8, стр. 3<br>
    &copy; 2003-2004 INTUIT.ru. Все права защищены.
    </td>
    </tr>
    </table>
</td>
</tr>
</table>
<!-- /bottom -->


</body>
</html>
